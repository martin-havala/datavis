class b{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const r=this._partials;let i=0;for(let e=0;e<this._n&&e<32;e++){const a=r[e],f=t+a,l=Math.abs(t)<Math.abs(a)?t-(f-a):a-(f-t);l&&(r[i++]=l),t=f}return r[i]=t,this._n=i+1,this}valueOf(){const t=this._partials;let r=this._n,i,e,a,f=0;if(r>0){for(f=t[--r];r>0&&(i=f,e=t[--r],f=i+e,a=e-(f-i),!a););r>0&&(a<0&&t[r-1]<0||a>0&&t[r-1]>0)&&(e=a*2,i=f+e,e==i-f&&(f=i))}return f}}function*Zt(n){for(const t of n)yield*t}function _t(n){return Array.from(Zt(n))}var z=1e-6,Bt=1e-12,N=Math.PI,B=N/2,nt=N/4,H=N*2,G=180/N,O=N/180,C=Math.abs,Rt=Math.atan,gn=Math.atan2,D=Math.cos,Li=Math.ceil,Gt=Math.exp,Ht=Math.log,q=Math.sin,Wt=Math.sign||function(n){return n>0?1:n<0?-1:0},tn=Math.sqrt,Jt=Math.tan;function Kt(n){return n>1?0:n<-1?N:Math.acos(n)}function vn(n){return n>1?B:n<-1?-B:Math.asin(n)}function J(){}function Rn(n,t){n&&it.hasOwnProperty(n.type)&&it[n.type](n,t)}var tt={Feature:function(n,t){Rn(n.geometry,t)},FeatureCollection:function(n,t){for(var r=n.features,i=-1,e=r.length;++i<e;)Rn(r[i].geometry,t)}},it={Sphere:function(n,t){t.sphere()},Point:function(n,t){n=n.coordinates,t.point(n[0],n[1],n[2])},MultiPoint:function(n,t){for(var r=n.coordinates,i=-1,e=r.length;++i<e;)n=r[i],t.point(n[0],n[1],n[2])},LineString:function(n,t){qn(n.coordinates,t,0)},MultiLineString:function(n,t){for(var r=n.coordinates,i=-1,e=r.length;++i<e;)qn(r[i],t,0)},Polygon:function(n,t){rt(n.coordinates,t)},MultiPolygon:function(n,t){for(var r=n.coordinates,i=-1,e=r.length;++i<e;)rt(r[i],t)},GeometryCollection:function(n,t){for(var r=n.geometries,i=-1,e=r.length;++i<e;)Rn(r[i],t)}};function qn(n,t,r){var i=-1,e=n.length-r,a;for(t.lineStart();++i<e;)a=n[i],t.point(a[0],a[1],a[2]);t.lineEnd()}function rt(n,t){var r=-1,i=n.length;for(t.polygonStart();++r<i;)qn(n[r],t,1);t.polygonEnd()}function en(n,t){n&&tt.hasOwnProperty(n.type)?tt[n.type](n,t):Rn(n,t)}function On(n){return[gn(n[1],n[0]),vn(n[2])]}function un(n){var t=n[0],r=n[1],i=D(r);return[i*D(t),i*q(t),q(r)]}function En(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]}function Pn(n,t){return[n[1]*t[2]-n[2]*t[1],n[2]*t[0]-n[0]*t[2],n[0]*t[1]-n[1]*t[0]]}function Tn(n,t){n[0]+=t[0],n[1]+=t[1],n[2]+=t[2]}function wn(n,t){return[n[0]*t,n[1]*t,n[2]*t]}function Xn(n){var t=tn(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]);n[0]/=t,n[1]/=t,n[2]/=t}function Yn(n,t){function r(i,e){return i=n(i,e),t(i[0],i[1])}return n.invert&&t.invert&&(r.invert=function(i,e){return i=t.invert(i,e),i&&n.invert(i[0],i[1])}),r}function Zn(n,t){return C(n)>N&&(n-=Math.round(n/H)*H),[n,t]}Zn.invert=Zn;function Pt(n,t,r){return(n%=H)?t||r?Yn(ot(n),ut(t,r)):ot(n):t||r?ut(t,r):Zn}function et(n){return function(t,r){return t+=n,C(t)>N&&(t-=Math.round(t/H)*H),[t,r]}}function ot(n){var t=et(n);return t.invert=et(-n),t}function ut(n,t){var r=D(n),i=q(n),e=D(t),a=q(t);function f(l,v){var g=D(v),o=D(l)*g,u=q(l)*g,c=q(v),p=c*r+o*i;return[gn(u*e-p*a,o*r-c*i),vn(p*e+u*a)]}return f.invert=function(l,v){var g=D(v),o=D(l)*g,u=q(l)*g,c=q(v),p=c*e-u*a;return[gn(u*e+c*a,o*r+p*i),vn(p*r-o*i)]},f}function Qt(n){n=Pt(n[0]*O,n[1]*O,n.length>2?n[2]*O:0);function t(r){return r=n(r[0]*O,r[1]*O),r[0]*=G,r[1]*=G,r}return t.invert=function(r){return r=n.invert(r[0]*O,r[1]*O),r[0]*=G,r[1]*=G,r},t}function Ut(n,t,r,i,e,a){if(r){var f=D(t),l=q(t),v=i*r;e==null?(e=t+i*H,a=t-v/2):(e=lt(f,e),a=lt(f,a),(i>0?e<a:e>a)&&(e+=i*H));for(var g,o=e;i>0?o>a:o<a;o-=v)g=On([f,-l*D(o),-l*q(o)]),n.point(g[0],g[1])}}function lt(n,t){t=un(t),t[0]-=n,Xn(t);var r=Kt(-t[1]);return((-t[2]<0?-r:r)+H-z)%H}function $t(){var n=[],t;return{point:function(r,i,e){t.push([r,i,e])},lineStart:function(){n.push(t=[])},lineEnd:J,rejoin:function(){n.length>1&&n.push(n.pop().concat(n.shift()))},result:function(){var r=n;return n=[],t=null,r}}}function _n(n,t){return C(n[0]-t[0])<z&&C(n[1]-t[1])<z}function Mn(n,t,r,i){this.x=n,this.z=t,this.o=r,this.e=i,this.v=!1,this.n=this.p=null}function Nt(n,t,r,i,e){var a=[],f=[],l,v;if(n.forEach(function(h){if(!((M=h.length-1)<=0)){var M,d=h[0],P=h[M],E;if(_n(d,P)){if(!d[2]&&!P[2]){for(e.lineStart(),l=0;l<M;++l)e.point((d=h[l])[0],d[1]);e.lineEnd();return}P[0]+=2*z}a.push(E=new Mn(d,h,null,!0)),f.push(E.o=new Mn(d,null,E,!1)),a.push(E=new Mn(P,h,null,!1)),f.push(E.o=new Mn(P,null,E,!0))}}),!!a.length){for(f.sort(t),ft(a),ft(f),l=0,v=f.length;l<v;++l)f[l].e=r=!r;for(var g=a[0],o,u;;){for(var c=g,p=!0;c.v;)if((c=c.n)===g)return;o=c.z,e.lineStart();do{if(c.v=c.o.v=!0,c.e){if(p)for(l=0,v=o.length;l<v;++l)e.point((u=o[l])[0],u[1]);else i(c.x,c.n.x,1,e);c=c.n}else{if(p)for(o=c.p.z,l=o.length-1;l>=0;--l)e.point((u=o[l])[0],u[1]);else i(c.x,c.p.x,-1,e);c=c.p}c=c.o,o=c.z,p=!p}while(!c.v);e.lineEnd()}}}function ft(n){if(t=n.length){for(var t,r=0,i=n[0],e;++r<t;)i.n=e=n[r],e.p=i,i=e;i.n=e=n[0],e.p=i}}function Cn(n){return C(n[0])<=N?n[0]:Wt(n[0])*((C(n[0])+N)%H-N)}function Vt(n,t){var r=Cn(t),i=t[1],e=q(i),a=[q(r),-D(r),0],f=0,l=0,v=new b;e===1?i=B+z:e===-1&&(i=-B-z);for(var g=0,o=n.length;g<o;++g)if(c=(u=n[g]).length)for(var u,c,p=u[c-1],h=Cn(p),M=p[1]/2+nt,d=q(M),P=D(M),E=0;E<c;++E,h=S,d=R,P=A,p=y){var y=u[E],S=Cn(y),_=y[1]/2+nt,R=q(_),A=D(_),I=S-h,L=I>=0?1:-1,T=L*I,w=T>N,Y=d*R;if(v.add(gn(Y*L*q(T),P*A+Y*D(T))),f+=w?I+L*H:I,w^h>=r^S>=r){var F=Pn(un(p),un(y));Xn(F);var m=Pn(a,F);Xn(m);var s=(w^I>=0?-1:1)*vn(m[2]);(i>s||i===s&&(F[0]||F[1]))&&(l+=w^I>=0?1:-1)}}return(f<-z||f<z&&v<-Bt)^l&1}function It(n,t,r,i){return function(e){var a=t(e),f=$t(),l=t(f),v=!1,g,o,u,c={point:p,lineStart:M,lineEnd:d,polygonStart:function(){c.point=P,c.lineStart=E,c.lineEnd=y,o=[],g=[]},polygonEnd:function(){c.point=p,c.lineStart=M,c.lineEnd=d,o=_t(o);var S=Vt(g,i);o.length?(v||(e.polygonStart(),v=!0),Nt(o,kt,S,r,e)):S&&(v||(e.polygonStart(),v=!0),e.lineStart(),r(null,null,1,e),e.lineEnd()),v&&(e.polygonEnd(),v=!1),o=g=null},sphere:function(){e.polygonStart(),e.lineStart(),r(null,null,1,e),e.lineEnd(),e.polygonEnd()}};function p(S,_){n(S,_)&&e.point(S,_)}function h(S,_){a.point(S,_)}function M(){c.point=h,a.lineStart()}function d(){c.point=p,a.lineEnd()}function P(S,_){u.push([S,_]),l.point(S,_)}function E(){l.lineStart(),u=[]}function y(){P(u[0][0],u[0][1]),l.lineEnd();var S=l.clean(),_=f.result(),R,A=_.length,I,L,T;if(u.pop(),g.push(u),u=null,!!A){if(S&1){if(L=_[0],(I=L.length-1)>0){for(v||(e.polygonStart(),v=!0),e.lineStart(),R=0;R<I;++R)e.point((T=L[R])[0],T[1]);e.lineEnd()}return}A>1&&S&2&&_.push(_.pop().concat(_.shift())),o.push(_.filter(xt))}}return c}}function xt(n){return n.length>1}function kt(n,t){return((n=n.x)[0]<0?n[1]-B-z:B-n[1])-((t=t.x)[0]<0?t[1]-B-z:B-t[1])}const at=It(function(){return!0},jt,ni,[-N,-B]);function jt(n){var t=NaN,r=NaN,i=NaN,e;return{lineStart:function(){n.lineStart(),e=1},point:function(a,f){var l=a>0?N:-N,v=C(a-t);C(v-N)<z?(n.point(t,r=(r+f)/2>0?B:-B),n.point(i,r),n.lineEnd(),n.lineStart(),n.point(l,r),n.point(a,r),e=0):i!==l&&v>=N&&(C(t-i)<z&&(t-=i*z),C(a-l)<z&&(a-=l*z),r=bt(t,r,a,f),n.point(i,r),n.lineEnd(),n.lineStart(),n.point(l,r),e=0),n.point(t=a,r=f),i=l},lineEnd:function(){n.lineEnd(),t=r=NaN},clean:function(){return 2-e}}}function bt(n,t,r,i){var e,a,f=q(n-r);return C(f)>z?Rt((q(t)*(a=D(i))*q(r)-q(i)*(e=D(t))*q(n))/(e*a*f)):(t+i)/2}function ni(n,t,r,i){var e;if(n==null)e=r*B,i.point(-N,e),i.point(0,e),i.point(N,e),i.point(N,0),i.point(N,-e),i.point(0,-e),i.point(-N,-e),i.point(-N,0),i.point(-N,e);else if(C(n[0]-t[0])>z){var a=n[0]<t[0]?N:-N;e=r*a/2,i.point(-a,e),i.point(0,e),i.point(a,e)}else i.point(t[0],t[1])}function ti(n){var t=D(n),r=6*O,i=t>0,e=C(t)>z;function a(o,u,c,p){Ut(p,n,r,c,o,u)}function f(o,u){return D(o)*D(u)>t}function l(o){var u,c,p,h,M;return{lineStart:function(){h=p=!1,M=1},point:function(d,P){var E=[d,P],y,S=f(d,P),_=i?S?0:g(d,P):S?g(d+(d<0?N:-N),P):0;if(!u&&(h=p=S)&&o.lineStart(),S!==p&&(y=v(u,E),(!y||_n(u,y)||_n(E,y))&&(E[2]=1)),S!==p)M=0,S?(o.lineStart(),y=v(E,u),o.point(y[0],y[1])):(y=v(u,E),o.point(y[0],y[1],2),o.lineEnd()),u=y;else if(e&&u&&i^S){var R;!(_&c)&&(R=v(E,u,!0))&&(M=0,i?(o.lineStart(),o.point(R[0][0],R[0][1]),o.point(R[1][0],R[1][1]),o.lineEnd()):(o.point(R[1][0],R[1][1]),o.lineEnd(),o.lineStart(),o.point(R[0][0],R[0][1],3)))}S&&(!u||!_n(u,E))&&o.point(E[0],E[1]),u=E,p=S,c=_},lineEnd:function(){p&&o.lineEnd(),u=null},clean:function(){return M|(h&&p)<<1}}}function v(o,u,c){var p=un(o),h=un(u),M=[1,0,0],d=Pn(p,h),P=En(d,d),E=d[0],y=P-E*E;if(!y)return!c&&o;var S=t*P/y,_=-t*E/y,R=Pn(M,d),A=wn(M,S),I=wn(d,_);Tn(A,I);var L=R,T=En(A,L),w=En(L,L),Y=T*T-w*(En(A,A)-1);if(!(Y<0)){var F=tn(Y),m=wn(L,(-T-F)/w);if(Tn(m,A),m=On(m),!c)return m;var s=o[0],$=u[0],X=o[1],Z=u[1],W;$<s&&(W=s,s=$,$=W);var fn=$-s,V=C(fn-N)<z,j=V||fn<z;if(!V&&Z<X&&(W=X,X=Z,Z=W),j?V?X+Z>0^m[1]<(C(m[0]-s)<z?X:Z):X<=m[1]&&m[1]<=Z:fn>N^(s<=m[0]&&m[0]<=$)){var x=wn(L,(-T+F)/w);return Tn(x,A),[m,On(x)]}}}function g(o,u){var c=i?n:N-n,p=0;return o<-c?p|=1:o>c&&(p|=2),u<-c?p|=4:u>c&&(p|=8),p}return It(f,l,a,i?[0,-n]:[-N,n-N])}function ii(n,t,r,i,e,a){var f=n[0],l=n[1],v=t[0],g=t[1],o=0,u=1,c=v-f,p=g-l,h;if(h=r-f,!(!c&&h>0)){if(h/=c,c<0){if(h<o)return;h<u&&(u=h)}else if(c>0){if(h>u)return;h>o&&(o=h)}if(h=e-f,!(!c&&h<0)){if(h/=c,c<0){if(h>u)return;h>o&&(o=h)}else if(c>0){if(h<o)return;h<u&&(u=h)}if(h=i-l,!(!p&&h>0)){if(h/=p,p<0){if(h<o)return;h<u&&(u=h)}else if(p>0){if(h>u)return;h>o&&(o=h)}if(h=a-l,!(!p&&h<0)){if(h/=p,p<0){if(h>u)return;h>o&&(o=h)}else if(p>0){if(h<o)return;h<u&&(u=h)}return o>0&&(n[0]=f+o*c,n[1]=l+o*p),u<1&&(t[0]=f+u*c,t[1]=l+u*p),!0}}}}}var an=1e9,yn=-an;function ri(n,t,r,i){function e(g,o){return n<=g&&g<=r&&t<=o&&o<=i}function a(g,o,u,c){var p=0,h=0;if(g==null||(p=f(g,u))!==(h=f(o,u))||v(g,o)<0^u>0)do c.point(p===0||p===3?n:r,p>1?i:t);while((p=(p+u+4)%4)!==h);else c.point(o[0],o[1])}function f(g,o){return C(g[0]-n)<z?o>0?0:3:C(g[0]-r)<z?o>0?2:1:C(g[1]-t)<z?o>0?1:0:o>0?3:2}function l(g,o){return v(g.x,o.x)}function v(g,o){var u=f(g,1),c=f(o,1);return u!==c?u-c:u===0?o[1]-g[1]:u===1?g[0]-o[0]:u===2?g[1]-o[1]:o[0]-g[0]}return function(g){var o=g,u=$t(),c,p,h,M,d,P,E,y,S,_,R,A={point:I,lineStart:Y,lineEnd:F,polygonStart:T,polygonEnd:w};function I(s,$){e(s,$)&&o.point(s,$)}function L(){for(var s=0,$=0,X=p.length;$<X;++$)for(var Z=p[$],W=1,fn=Z.length,V=Z[0],j,x,Sn=V[0],rn=V[1];W<fn;++W)j=Sn,x=rn,V=Z[W],Sn=V[0],rn=V[1],x<=i?rn>i&&(Sn-j)*(i-x)>(rn-x)*(n-j)&&++s:rn<=i&&(Sn-j)*(i-x)<(rn-x)*(n-j)&&--s;return s}function T(){o=u,c=[],p=[],R=!0}function w(){var s=L(),$=R&&s,X=(c=_t(c)).length;($||X)&&(g.polygonStart(),$&&(g.lineStart(),a(null,null,1,g),g.lineEnd()),X&&Nt(c,l,s,a,g),g.polygonEnd()),o=g,c=p=h=null}function Y(){A.point=m,p&&p.push(h=[]),_=!0,S=!1,E=y=NaN}function F(){c&&(m(M,d),P&&S&&u.rejoin(),c.push(u.result())),A.point=I,S&&o.lineEnd()}function m(s,$){var X=e(s,$);if(p&&h.push([s,$]),_)M=s,d=$,P=X,_=!1,X&&(o.lineStart(),o.point(s,$));else if(X&&S)o.point(s,$);else{var Z=[E=Math.max(yn,Math.min(an,E)),y=Math.max(yn,Math.min(an,y))],W=[s=Math.max(yn,Math.min(an,s)),$=Math.max(yn,Math.min(an,$))];ii(Z,W,n,t,r,i)?(S||(o.lineStart(),o.point(Z[0],Z[1])),o.point(W[0],W[1]),X||o.lineEnd(),R=!1):X&&(o.lineStart(),o.point(s,$),R=!1)}E=s,y=$,S=X}return A}}const Bn=n=>n;var Fn=new b,Gn=new b,Lt,At,Hn,Wn,k={point:J,lineStart:J,lineEnd:J,polygonStart:function(){k.lineStart=ei,k.lineEnd=ui},polygonEnd:function(){k.lineStart=k.lineEnd=k.point=J,Fn.add(C(Gn)),Gn=new b},result:function(){var n=Fn/2;return Fn=new b,n}};function ei(){k.point=oi}function oi(n,t){k.point=mt,Lt=Hn=n,At=Wn=t}function mt(n,t){Gn.add(Wn*n-Hn*t),Hn=n,Wn=t}function ui(){mt(Lt,At)}const ct=k;var ln=1/0,$n=ln,dn=-ln,Nn=dn,li={point:fi,lineStart:J,lineEnd:J,polygonStart:J,polygonEnd:J,result:function(){var n=[[ln,$n],[dn,Nn]];return dn=Nn=-($n=ln=1/0),n}};function fi(n,t){n<ln&&(ln=n),n>dn&&(dn=n),t<$n&&($n=t),t>Nn&&(Nn=t)}const In=li;var Jn=0,Kn=0,cn=0,Ln=0,An=0,on=0,Qn=0,Un=0,sn=0,zt,Tt,Q,U,K={point:nn,lineStart:st,lineEnd:pt,polygonStart:function(){K.lineStart=si,K.lineEnd=pi},polygonEnd:function(){K.point=nn,K.lineStart=st,K.lineEnd=pt},result:function(){var n=sn?[Qn/sn,Un/sn]:on?[Ln/on,An/on]:cn?[Jn/cn,Kn/cn]:[NaN,NaN];return Jn=Kn=cn=Ln=An=on=Qn=Un=sn=0,n}};function nn(n,t){Jn+=n,Kn+=t,++cn}function st(){K.point=ai}function ai(n,t){K.point=ci,nn(Q=n,U=t)}function ci(n,t){var r=n-Q,i=t-U,e=tn(r*r+i*i);Ln+=e*(Q+n)/2,An+=e*(U+t)/2,on+=e,nn(Q=n,U=t)}function pt(){K.point=nn}function si(){K.point=hi}function pi(){Ct(zt,Tt)}function hi(n,t){K.point=Ct,nn(zt=Q=n,Tt=U=t)}function Ct(n,t){var r=n-Q,i=t-U,e=tn(r*r+i*i);Ln+=e*(Q+n)/2,An+=e*(U+t)/2,on+=e,e=U*n-Q*t,Qn+=e*(Q+n),Un+=e*(U+t),sn+=e*3,nn(Q=n,U=t)}const ht=K;function Ft(n){this._context=n}Ft.prototype={_radius:4.5,pointRadius:function(n){return this._radius=n,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(n,t){switch(this._point){case 0:{this._context.moveTo(n,t),this._point=1;break}case 1:{this._context.lineTo(n,t);break}default:{this._context.moveTo(n+this._radius,t),this._context.arc(n,t,this._radius,0,H);break}}},result:J};var Vn=new b,Dn,Dt,qt,pn,hn,mn={point:J,lineStart:function(){mn.point=gi},lineEnd:function(){Dn&&Ot(Dt,qt),mn.point=J},polygonStart:function(){Dn=!0},polygonEnd:function(){Dn=null},result:function(){var n=+Vn;return Vn=new b,n}};function gi(n,t){mn.point=Ot,Dt=pn=n,qt=hn=t}function Ot(n,t){pn-=n,hn-=t,Vn.add(tn(pn*pn+hn*hn)),pn=n,hn=t}const gt=mn;let vt,zn,dt,St;class Et{constructor(t){this._append=t==null?Xt:vi(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,r){switch(this._point){case 0:{this._append`M${t},${r}`,this._point=1;break}case 1:{this._append`L${t},${r}`;break}default:{if(this._append`M${t},${r}`,this._radius!==dt||this._append!==zn){const i=this._radius,e=this._;this._="",this._append`m0,${i}a${i},${i} 0 1,1 0,${-2*i}a${i},${i} 0 1,1 0,${2*i}z`,dt=i,zn=this._append,St=this._,this._=e}this._+=St;break}}}result(){const t=this._;return this._="",t.length?t:null}}function Xt(n){let t=1;this._+=n[0];for(const r=n.length;t<r;++t)this._+=arguments[t]+n[t]}function vi(n){const t=Math.floor(n);if(!(t>=0))throw new RangeError(`invalid digits: ${n}`);if(t>15)return Xt;if(t!==vt){const r=10**t;vt=t,zn=function(e){let a=1;this._+=e[0];for(const f=e.length;a<f;++a)this._+=Math.round(arguments[a]*r)/r+e[a]}}return zn}function Ai(n,t){let r=3,i=4.5,e,a;function f(l){return l&&(typeof i=="function"&&a.pointRadius(+i.apply(this,arguments)),en(l,e(a))),a.result()}return f.area=function(l){return en(l,e(ct)),ct.result()},f.measure=function(l){return en(l,e(gt)),gt.result()},f.bounds=function(l){return en(l,e(In)),In.result()},f.centroid=function(l){return en(l,e(ht)),ht.result()},f.projection=function(l){return arguments.length?(e=l==null?(n=null,Bn):(n=l).stream,f):n},f.context=function(l){return arguments.length?(a=l==null?(t=null,new Et(r)):new Ft(t=l),typeof i!="function"&&a.pointRadius(i),f):t},f.pointRadius=function(l){return arguments.length?(i=typeof l=="function"?l:(a.pointRadius(+l),+l),f):i},f.digits=function(l){if(!arguments.length)return r;if(l==null)r=null;else{const v=Math.floor(l);if(!(v>=0))throw new RangeError(`invalid digits: ${l}`);r=v}return t===null&&(a=new Et(r)),f},f.projection(n).digits(r).context(t)}function kn(n){return function(t){var r=new xn;for(var i in n)r[i]=n[i];return r.stream=t,r}}function xn(){}xn.prototype={constructor:xn,point:function(n,t){this.stream.point(n,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function jn(n,t,r){var i=n.clipExtent&&n.clipExtent();return n.scale(150).translate([0,0]),i!=null&&n.clipExtent(null),en(r,n.stream(In)),t(In.result()),i!=null&&n.clipExtent(i),n}function Yt(n,t,r){return jn(n,function(i){var e=t[1][0]-t[0][0],a=t[1][1]-t[0][1],f=Math.min(e/(i[1][0]-i[0][0]),a/(i[1][1]-i[0][1])),l=+t[0][0]+(e-f*(i[1][0]+i[0][0]))/2,v=+t[0][1]+(a-f*(i[1][1]+i[0][1]))/2;n.scale(150*f).translate([l,v])},r)}function di(n,t,r){return Yt(n,[[0,0],t],r)}function Si(n,t,r){return jn(n,function(i){var e=+t,a=e/(i[1][0]-i[0][0]),f=(e-a*(i[1][0]+i[0][0]))/2,l=-a*i[0][1];n.scale(150*a).translate([f,l])},r)}function Ei(n,t,r){return jn(n,function(i){var e=+t,a=e/(i[1][1]-i[0][1]),f=-a*i[0][0],l=(e-a*(i[1][1]+i[0][1]))/2;n.scale(150*a).translate([f,l])},r)}var wt=16,wi=D(30*O);function Mt(n,t){return+t?yi(n,t):Mi(n)}function Mi(n){return kn({point:function(t,r){t=n(t,r),this.stream.point(t[0],t[1])}})}function yi(n,t){function r(i,e,a,f,l,v,g,o,u,c,p,h,M,d){var P=g-i,E=o-e,y=P*P+E*E;if(y>4*t&&M--){var S=f+c,_=l+p,R=v+h,A=tn(S*S+_*_+R*R),I=vn(R/=A),L=C(C(R)-1)<z||C(a-u)<z?(a+u)/2:gn(_,S),T=n(L,I),w=T[0],Y=T[1],F=w-i,m=Y-e,s=E*F-P*m;(s*s/y>t||C((P*F+E*m)/y-.5)>.3||f*c+l*p+v*h<wi)&&(r(i,e,a,f,l,v,w,Y,L,S/=A,_/=A,R,M,d),d.point(w,Y),r(w,Y,L,S,_,R,g,o,u,c,p,h,M,d))}}return function(i){var e,a,f,l,v,g,o,u,c,p,h,M,d={point:P,lineStart:E,lineEnd:S,polygonStart:function(){i.polygonStart(),d.lineStart=_},polygonEnd:function(){i.polygonEnd(),d.lineStart=E}};function P(I,L){I=n(I,L),i.point(I[0],I[1])}function E(){u=NaN,d.point=y,i.lineStart()}function y(I,L){var T=un([I,L]),w=n(I,L);r(u,c,o,p,h,M,u=w[0],c=w[1],o=I,p=T[0],h=T[1],M=T[2],wt,i),i.point(u,c)}function S(){d.point=P,i.lineEnd()}function _(){E(),d.point=R,d.lineEnd=A}function R(I,L){y(e=I,L),a=u,f=c,l=p,v=h,g=M,d.point=y}function A(){r(u,c,o,p,h,M,a,f,e,l,v,g,wt,i),d.lineEnd=S,S()}return d}}var _i=kn({point:function(n,t){this.stream.point(n*O,t*O)}});function Ri(n){return kn({point:function(t,r){var i=n(t,r);return this.stream.point(i[0],i[1])}})}function Pi(n,t,r,i,e){function a(f,l){return f*=i,l*=e,[t+n*f,r-n*l]}return a.invert=function(f,l){return[(f-t)/n*i,(r-l)/n*e]},a}function yt(n,t,r,i,e,a){if(!a)return Pi(n,t,r,i,e);var f=D(a),l=q(a),v=f*n,g=l*n,o=f/n,u=l/n,c=(l*r-f*t)/n,p=(l*t+f*r)/n;function h(M,d){return M*=i,d*=e,[v*M-g*d+t,r-g*M-v*d]}return h.invert=function(M,d){return[i*(o*M-u*d+c),e*(p-u*M-o*d)]},h}function $i(n){return Ni(function(){return n})()}function Ni(n){var t,r=150,i=480,e=250,a=0,f=0,l=0,v=0,g=0,o,u=0,c=1,p=1,h=null,M=at,d=null,P,E,y,S=Bn,_=.5,R,A,I,L,T;function w(s){return I(s[0]*O,s[1]*O)}function Y(s){return s=I.invert(s[0],s[1]),s&&[s[0]*G,s[1]*G]}w.stream=function(s){return L&&T===s?L:L=_i(Ri(o)(M(R(S(T=s)))))},w.preclip=function(s){return arguments.length?(M=s,h=void 0,m()):M},w.postclip=function(s){return arguments.length?(S=s,d=P=E=y=null,m()):S},w.clipAngle=function(s){return arguments.length?(M=+s?ti(h=s*O):(h=null,at),m()):h*G},w.clipExtent=function(s){return arguments.length?(S=s==null?(d=P=E=y=null,Bn):ri(d=+s[0][0],P=+s[0][1],E=+s[1][0],y=+s[1][1]),m()):d==null?null:[[d,P],[E,y]]},w.scale=function(s){return arguments.length?(r=+s,F()):r},w.translate=function(s){return arguments.length?(i=+s[0],e=+s[1],F()):[i,e]},w.center=function(s){return arguments.length?(a=s[0]%360*O,f=s[1]%360*O,F()):[a*G,f*G]},w.rotate=function(s){return arguments.length?(l=s[0]%360*O,v=s[1]%360*O,g=s.length>2?s[2]%360*O:0,F()):[l*G,v*G,g*G]},w.angle=function(s){return arguments.length?(u=s%360*O,F()):u*G},w.reflectX=function(s){return arguments.length?(c=s?-1:1,F()):c<0},w.reflectY=function(s){return arguments.length?(p=s?-1:1,F()):p<0},w.precision=function(s){return arguments.length?(R=Mt(A,_=s*s),m()):tn(_)},w.fitExtent=function(s,$){return Yt(w,s,$)},w.fitSize=function(s,$){return di(w,s,$)},w.fitWidth=function(s,$){return Si(w,s,$)},w.fitHeight=function(s,$){return Ei(w,s,$)};function F(){var s=yt(r,0,0,c,p,u).apply(null,t(a,f)),$=yt(r,i-s[0],e-s[1],c,p,u);return o=Pt(l,v,g),A=Yn(t,$),I=Yn(o,A),R=Mt(A,_),m()}function m(){return L=T=null,w}return function(){return t=n.apply(this,arguments),w.invert=t.invert&&Y,F()}}function bn(n,t){return[n,Ht(Jt((B+t)/2))]}bn.invert=function(n,t){return[n,2*Rt(Gt(t))-B]};function mi(){return Ii(bn).scale(961/H)}function Ii(n){var t=$i(n),r=t.center,i=t.scale,e=t.translate,a=t.clipExtent,f=null,l,v,g;t.scale=function(u){return arguments.length?(i(u),o()):i()},t.translate=function(u){return arguments.length?(e(u),o()):e()},t.center=function(u){return arguments.length?(r(u),o()):r()},t.clipExtent=function(u){return arguments.length?(u==null?f=l=v=g=null:(f=+u[0][0],l=+u[0][1],v=+u[1][0],g=+u[1][1]),o()):f==null?null:[[f,l],[v,g]]};function o(){var u=N*i(),c=t(Qt(t.rotate()).invert([0,0]));return a(f==null?[[c[0]-u,c[1]-u],[c[0]+u,c[1]+u]]:n===bn?[[Math.max(c[0]-u,f),l],[Math.min(c[0]+u,v),g]]:[[f,Math.max(c[1]-u,l)],[v,Math.min(c[1]+u,g)]])}return o()}export{C as a,Li as c,z as e,Ai as i,mi as m};
