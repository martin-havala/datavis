import{c as d,a as P}from"./array.bfeb4c0f.js";const g=Math.PI,v=2*g,c=1e-6,A=v-c;function E(e){this._+=e[0];for(let t=1,i=e.length;t<i;++t)this._+=arguments[t]+e[t]}function S(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return E;const i=10**t;return function(n){this._+=n[0];for(let h=1,o=n.length;h<o;++h)this._+=Math.round(arguments[h]*i)/i+n[h]}}class k{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?E:S(t)}moveTo(t,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+i}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,i){this._append`L${this._x1=+t},${this._y1=+i}`}quadraticCurveTo(t,i,n,h){this._append`Q${+t},${+i},${this._x1=+n},${this._y1=+h}`}bezierCurveTo(t,i,n,h,o,f){this._append`C${+t},${+i},${+n},${+h},${this._x1=+o},${this._y1=+f}`}arcTo(t,i,n,h,o){if(t=+t,i=+i,n=+n,h=+h,o=+o,o<0)throw new Error(`negative radius: ${o}`);let f=this._x1,l=this._y1,s=n-t,u=h-i,r=f-t,_=l-i,a=r*r+_*_;if(this._x1===null)this._append`M${this._x1=t},${this._y1=i}`;else if(a>c)if(!(Math.abs(_*s-u*r)>c)||!o)this._append`L${this._x1=t},${this._y1=i}`;else{let p=n-f,$=h-l,m=s*s+u*u,L=p*p+$*$,x=Math.sqrt(m),b=Math.sqrt(a),w=o*Math.tan((g-Math.acos((m+a-L)/(2*x*b)))/2),M=w/b,y=w/x;Math.abs(M-1)>c&&this._append`L${t+M*r},${i+M*_}`,this._append`A${o},${o},0,0,${+(_*p>r*$)},${this._x1=t+y*s},${this._y1=i+y*u}`}}arc(t,i,n,h,o,f){if(t=+t,i=+i,n=+n,f=!!f,n<0)throw new Error(`negative radius: ${n}`);let l=n*Math.cos(h),s=n*Math.sin(h),u=t+l,r=i+s,_=1^f,a=f?h-o:o-h;this._x1===null?this._append`M${u},${r}`:(Math.abs(this._x1-u)>c||Math.abs(this._y1-r)>c)&&this._append`L${u},${r}`,n&&(a<0&&(a=a%v+v),a>A?this._append`A${n},${n},0,1,${_},${t-l},${i-s}A${n},${n},0,1,${_},${this._x1=u},${this._y1=r}`:a>c&&this._append`A${n},${n},0,${+(a>=g)},${_},${this._x1=t+n*Math.cos(o)},${this._y1=i+n*Math.sin(o)}`)}rect(t,i,n,h){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+i}h${n=+n}v${+h}h${-n}Z`}toString(){return this._}}function q(e){let t=3;return e.digits=function(i){if(!arguments.length)return t;if(i==null)t=null;else{const n=Math.floor(i);if(!(n>=0))throw new RangeError(`invalid digits: ${i}`);t=n}return e},()=>new k(t)}function T(e){this._context=e}T.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function C(e){return new T(e)}function N(e){return e[0]}function R(e){return e[1]}function z(e,t){var i=d(!0),n=null,h=C,o=null,f=q(l);e=typeof e=="function"?e:e===void 0?N:d(e),t=typeof t=="function"?t:t===void 0?R:d(t);function l(s){var u,r=(s=P(s)).length,_,a=!1,p;for(n==null&&(o=h(p=f())),u=0;u<=r;++u)!(u<r&&i(_=s[u],u,s))===a&&((a=!a)?o.lineStart():o.lineEnd()),a&&o.point(+e(_,u,s),+t(_,u,s));if(p)return o=null,p+""||null}return l.x=function(s){return arguments.length?(e=typeof s=="function"?s:d(+s),l):e},l.y=function(s){return arguments.length?(t=typeof s=="function"?s:d(+s),l):t},l.defined=function(s){return arguments.length?(i=typeof s=="function"?s:d(!!s),l):i},l.curve=function(s){return arguments.length?(h=s,n!=null&&(o=h(n)),l):h},l.context=function(s){return arguments.length?(s==null?n=o=null:o=h(n=s),l):n},l}export{z as l};
