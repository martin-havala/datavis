import{r as on}from"./range.6bc2a9a0.js";class b{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const r=this._partials;let i=0;for(let e=0;e<this._n&&e<32;e++){const l=r[e],a=t+l,f=Math.abs(t)<Math.abs(l)?t-(a-l):l-(a-t);f&&(r[i++]=f),t=a}return r[i]=t,this._n=i+1,this}valueOf(){const t=this._partials;let r=this._n,i,e,l,a=0;if(r>0){for(a=t[--r];r>0&&(i=a,e=t[--r],a=i+e,l=e-(a-i),!l););r>0&&(l<0&&t[r-1]<0||l>0&&t[r-1]>0)&&(e=l*2,i=a+e,e==i-a&&(a=i))}return a}}function*Wt(n){for(const t of n)yield*t}function Nt(n){return Array.from(Wt(n))}var _=1e-6,xt=1e-12,N=Math.PI,B=N/2,it=N/4,H=N*2,G=180/N,F=N/180,T=Math.abs,_t=Math.atan,vn=Math.atan2,C=Math.cos,Mn=Math.ceil,Jt=Math.exp,Kt=Math.log,D=Math.sin,Qt=Math.sign||function(n){return n>0?1:n<0?-1:0},tn=Math.sqrt,Ut=Math.tan;function Vt(n){return n>1?0:n<-1?N:Math.acos(n)}function dn(n){return n>1?B:n<-1?-B:Math.asin(n)}function x(){}function $n(n,t){n&&et.hasOwnProperty(n.type)&&et[n.type](n,t)}var rt={Feature:function(n,t){$n(n.geometry,t)},FeatureCollection:function(n,t){for(var r=n.features,i=-1,e=r.length;++i<e;)$n(r[i].geometry,t)}},et={Sphere:function(n,t){t.sphere()},Point:function(n,t){n=n.coordinates,t.point(n[0],n[1],n[2])},MultiPoint:function(n,t){for(var r=n.coordinates,i=-1,e=r.length;++i<e;)n=r[i],t.point(n[0],n[1],n[2])},LineString:function(n,t){qn(n.coordinates,t,0)},MultiLineString:function(n,t){for(var r=n.coordinates,i=-1,e=r.length;++i<e;)qn(r[i],t,0)},Polygon:function(n,t){ot(n.coordinates,t)},MultiPolygon:function(n,t){for(var r=n.coordinates,i=-1,e=r.length;++i<e;)ot(r[i],t)},GeometryCollection:function(n,t){for(var r=n.geometries,i=-1,e=r.length;++i<e;)$n(r[i],t)}};function qn(n,t,r){var i=-1,e=n.length-r,l;for(t.lineStart();++i<e;)l=n[i],t.point(l[0],l[1],l[2]);t.lineEnd()}function ot(n,t){var r=-1,i=n.length;for(t.polygonStart();++r<i;)qn(n[r],t,1);t.polygonEnd()}function en(n,t){n&&rt.hasOwnProperty(n.type)?rt[n.type](n,t):$n(n,t)}function On(n){return[vn(n[1],n[0]),dn(n[2])]}function fn(n){var t=n[0],r=n[1],i=C(r);return[i*C(t),i*D(t),D(r)]}function yn(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]}function Nn(n,t){return[n[1]*t[2]-n[2]*t[1],n[2]*t[0]-n[0]*t[2],n[0]*t[1]-n[1]*t[0]]}function Yn(n,t){n[0]+=t[0],n[1]+=t[1],n[2]+=t[2]}function wn(n,t){return[n[0]*t,n[1]*t,n[2]*t]}function Zn(n){var t=tn(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]);n[0]/=t,n[1]/=t,n[2]/=t}function Bn(n,t){function r(i,e){return i=n(i,e),t(i[0],i[1])}return n.invert&&t.invert&&(r.invert=function(i,e){return i=t.invert(i,e),i&&n.invert(i[0],i[1])}),r}function Gn(n,t){return T(n)>N&&(n-=Math.round(n/H)*H),[n,t]}Gn.invert=Gn;function Lt(n,t,r){return(n%=H)?t||r?Bn(ft(n),lt(t,r)):ft(n):t||r?lt(t,r):Gn}function ut(n){return function(t,r){return t+=n,T(t)>N&&(t-=Math.round(t/H)*H),[t,r]}}function ft(n){var t=ut(n);return t.invert=ut(-n),t}function lt(n,t){var r=C(n),i=D(n),e=C(t),l=D(t);function a(f,d){var g=C(d),o=C(f)*g,u=D(f)*g,c=D(d),h=c*r+o*i;return[vn(u*e-h*l,o*r-c*i),dn(h*e+u*l)]}return a.invert=function(f,d){var g=C(d),o=C(f)*g,u=D(f)*g,c=D(d),h=c*e-u*l;return[vn(u*e+c*l,o*r+h*i),dn(h*r-o*i)]},a}function jt(n){n=Lt(n[0]*F,n[1]*F,n.length>2?n[2]*F:0);function t(r){return r=n(r[0]*F,r[1]*F),r[0]*=G,r[1]*=G,r}return t.invert=function(r){return r=n.invert(r[0]*F,r[1]*F),r[0]*=G,r[1]*=G,r},t}function kt(n,t,r,i,e,l){if(r){var a=C(t),f=D(t),d=i*r;e==null?(e=t+i*H,l=t-d/2):(e=at(a,e),l=at(a,l),(i>0?e<l:e>l)&&(e+=i*H));for(var g,o=e;i>0?o>l:o<l;o-=d)g=On([a,-f*C(o),-f*D(o)]),n.point(g[0],g[1])}}function at(n,t){t=fn(t),t[0]-=n,Zn(t);var r=Vt(-t[1]);return((-t[2]<0?-r:r)+H-_)%H}function It(){var n=[],t;return{point:function(r,i,e){t.push([r,i,e])},lineStart:function(){n.push(t=[])},lineEnd:x,rejoin:function(){n.length>1&&n.push(n.pop().concat(n.shift()))},result:function(){var r=n;return n=[],t=null,r}}}function mn(n,t){return T(n[0]-t[0])<_&&T(n[1]-t[1])<_}function Rn(n,t,r,i){this.x=n,this.z=t,this.o=r,this.e=i,this.v=!1,this.n=this.p=null}function At(n,t,r,i,e){var l=[],a=[],f,d;if(n.forEach(function(p){if(!((w=p.length-1)<=0)){var w,S=p[0],E=p[w],y;if(mn(S,E)){if(!S[2]&&!E[2]){for(e.lineStart(),f=0;f<w;++f)e.point((S=p[f])[0],S[1]);e.lineEnd();return}E[0]+=2*_}l.push(y=new Rn(S,p,null,!0)),a.push(y.o=new Rn(S,null,y,!1)),l.push(y=new Rn(E,p,null,!1)),a.push(y.o=new Rn(E,null,y,!0))}}),!!l.length){for(a.sort(t),ct(l),ct(a),f=0,d=a.length;f<d;++f)a[f].e=r=!r;for(var g=l[0],o,u;;){for(var c=g,h=!0;c.v;)if((c=c.n)===g)return;o=c.z,e.lineStart();do{if(c.v=c.o.v=!0,c.e){if(h)for(f=0,d=o.length;f<d;++f)e.point((u=o[f])[0],u[1]);else i(c.x,c.n.x,1,e);c=c.n}else{if(h)for(o=c.p.z,f=o.length-1;f>=0;--f)e.point((u=o[f])[0],u[1]);else i(c.x,c.p.x,-1,e);c=c.p}c=c.o,o=c.z,h=!h}while(!c.v);e.lineEnd()}}}function ct(n){if(t=n.length){for(var t,r=0,i=n[0],e;++r<t;)i.n=e=n[r],e.p=i,i=e;i.n=e=n[0],e.p=i}}function Cn(n){return T(n[0])<=N?n[0]:Qt(n[0])*((T(n[0])+N)%H-N)}function bt(n,t){var r=Cn(t),i=t[1],e=D(i),l=[D(r),-C(r),0],a=0,f=0,d=new b;e===1?i=B+_:e===-1&&(i=-B-_);for(var g=0,o=n.length;g<o;++g)if(c=(u=n[g]).length)for(var u,c,h=u[c-1],p=Cn(h),w=h[1]/2+it,S=D(w),E=C(w),y=0;y<c;++y,p=M,S=m,E=A,h=v){var v=u[y],M=Cn(v),P=v[1]/2+it,m=D(P),A=C(P),L=M-p,I=L>=0?1:-1,X=I*L,R=X>N,O=S*m;if(d.add(vn(O*I*D(X),E*A+O*C(X))),a+=R?L+I*H:L,R^p>=r^M>=r){var Y=Nn(fn(h),fn(v));Zn(Y);var z=Nn(l,Y);Zn(z);var s=(R^L>=0?-1:1)*dn(z[2]);(i>s||i===s&&(Y[0]||Y[1]))&&(f+=R^L>=0?1:-1)}}return(a<-_||a<_&&d<-xt)^f&1}function zt(n,t,r,i){return function(e){var l=t(e),a=It(),f=t(a),d=!1,g,o,u,c={point:h,lineStart:w,lineEnd:S,polygonStart:function(){c.point=E,c.lineStart=y,c.lineEnd=v,o=[],g=[]},polygonEnd:function(){c.point=h,c.lineStart=w,c.lineEnd=S,o=Nt(o);var M=bt(g,i);o.length?(d||(e.polygonStart(),d=!0),At(o,ti,M,r,e)):M&&(d||(e.polygonStart(),d=!0),e.lineStart(),r(null,null,1,e),e.lineEnd()),d&&(e.polygonEnd(),d=!1),o=g=null},sphere:function(){e.polygonStart(),e.lineStart(),r(null,null,1,e),e.lineEnd(),e.polygonEnd()}};function h(M,P){n(M,P)&&e.point(M,P)}function p(M,P){l.point(M,P)}function w(){c.point=p,l.lineStart()}function S(){c.point=h,l.lineEnd()}function E(M,P){u.push([M,P]),f.point(M,P)}function y(){f.lineStart(),u=[]}function v(){E(u[0][0],u[0][1]),f.lineEnd();var M=f.clean(),P=a.result(),m,A=P.length,L,I,X;if(u.pop(),g.push(u),u=null,!!A){if(M&1){if(I=P[0],(L=I.length-1)>0){for(d||(e.polygonStart(),d=!0),e.lineStart(),m=0;m<L;++m)e.point((X=I[m])[0],X[1]);e.lineEnd()}return}A>1&&M&2&&P.push(P.pop().concat(P.shift())),o.push(P.filter(ni))}}return c}}function ni(n){return n.length>1}function ti(n,t){return((n=n.x)[0]<0?n[1]-B-_:B-n[1])-((t=t.x)[0]<0?t[1]-B-_:B-t[1])}const st=zt(function(){return!0},ii,ei,[-N,-B]);function ii(n){var t=NaN,r=NaN,i=NaN,e;return{lineStart:function(){n.lineStart(),e=1},point:function(l,a){var f=l>0?N:-N,d=T(l-t);T(d-N)<_?(n.point(t,r=(r+a)/2>0?B:-B),n.point(i,r),n.lineEnd(),n.lineStart(),n.point(f,r),n.point(l,r),e=0):i!==f&&d>=N&&(T(t-i)<_&&(t-=i*_),T(l-f)<_&&(l-=f*_),r=ri(t,r,l,a),n.point(i,r),n.lineEnd(),n.lineStart(),n.point(f,r),e=0),n.point(t=l,r=a),i=f},lineEnd:function(){n.lineEnd(),t=r=NaN},clean:function(){return 2-e}}}function ri(n,t,r,i){var e,l,a=D(n-r);return T(a)>_?_t((D(t)*(l=C(i))*D(r)-D(i)*(e=C(t))*D(n))/(e*l*a)):(t+i)/2}function ei(n,t,r,i){var e;if(n==null)e=r*B,i.point(-N,e),i.point(0,e),i.point(N,e),i.point(N,0),i.point(N,-e),i.point(0,-e),i.point(-N,-e),i.point(-N,0),i.point(-N,e);else if(T(n[0]-t[0])>_){var l=n[0]<t[0]?N:-N;e=r*l/2,i.point(-l,e),i.point(0,e),i.point(l,e)}else i.point(t[0],t[1])}function oi(n){var t=C(n),r=6*F,i=t>0,e=T(t)>_;function l(o,u,c,h){kt(h,n,r,c,o,u)}function a(o,u){return C(o)*C(u)>t}function f(o){var u,c,h,p,w;return{lineStart:function(){p=h=!1,w=1},point:function(S,E){var y=[S,E],v,M=a(S,E),P=i?M?0:g(S,E):M?g(S+(S<0?N:-N),E):0;if(!u&&(p=h=M)&&o.lineStart(),M!==h&&(v=d(u,y),(!v||mn(u,v)||mn(y,v))&&(y[2]=1)),M!==h)w=0,M?(o.lineStart(),v=d(y,u),o.point(v[0],v[1])):(v=d(u,y),o.point(v[0],v[1],2),o.lineEnd()),u=v;else if(e&&u&&i^M){var m;!(P&c)&&(m=d(y,u,!0))&&(w=0,i?(o.lineStart(),o.point(m[0][0],m[0][1]),o.point(m[1][0],m[1][1]),o.lineEnd()):(o.point(m[1][0],m[1][1]),o.lineEnd(),o.lineStart(),o.point(m[0][0],m[0][1],3)))}M&&(!u||!mn(u,y))&&o.point(y[0],y[1]),u=y,h=M,c=P},lineEnd:function(){h&&o.lineEnd(),u=null},clean:function(){return w|(p&&h)<<1}}}function d(o,u,c){var h=fn(o),p=fn(u),w=[1,0,0],S=Nn(h,p),E=yn(S,S),y=S[0],v=E-y*y;if(!v)return!c&&o;var M=t*E/v,P=-t*y/v,m=Nn(w,S),A=wn(w,M),L=wn(S,P);Yn(A,L);var I=m,X=yn(A,I),R=yn(I,I),O=X*X-R*(yn(A,A)-1);if(!(O<0)){var Y=tn(O),z=wn(I,(-X-Y)/R);if(Yn(z,A),z=On(z),!c)return z;var s=o[0],$=u[0],q=o[1],Z=u[1],W;$<s&&(W=s,s=$,$=W);var an=$-s,U=T(an-N)<_,k=U||an<_;if(!U&&Z<q&&(W=q,q=Z,Z=W),k?U?q+Z>0^z[1]<(T(z[0]-s)<_?q:Z):q<=z[1]&&z[1]<=Z:an>N^(s<=z[0]&&z[0]<=$)){var V=wn(I,(-X+Y)/R);return Yn(V,A),[z,On(V)]}}}function g(o,u){var c=i?n:N-n,h=0;return o<-c?h|=1:o>c&&(h|=2),u<-c?h|=4:u>c&&(h|=8),h}return zt(a,f,l,i?[0,-n]:[-N,n-N])}function ui(n,t,r,i,e,l){var a=n[0],f=n[1],d=t[0],g=t[1],o=0,u=1,c=d-a,h=g-f,p;if(p=r-a,!(!c&&p>0)){if(p/=c,c<0){if(p<o)return;p<u&&(u=p)}else if(c>0){if(p>u)return;p>o&&(o=p)}if(p=e-a,!(!c&&p<0)){if(p/=c,c<0){if(p>u)return;p>o&&(o=p)}else if(c>0){if(p<o)return;p<u&&(u=p)}if(p=i-f,!(!h&&p>0)){if(p/=h,h<0){if(p<o)return;p<u&&(u=p)}else if(h>0){if(p>u)return;p>o&&(o=p)}if(p=l-f,!(!h&&p<0)){if(p/=h,h<0){if(p>u)return;p>o&&(o=p)}else if(h>0){if(p<o)return;p<u&&(u=p)}return o>0&&(n[0]=a+o*c,n[1]=f+o*h),u<1&&(t[0]=a+u*c,t[1]=f+u*h),!0}}}}}var cn=1e9,Pn=-cn;function fi(n,t,r,i){function e(g,o){return n<=g&&g<=r&&t<=o&&o<=i}function l(g,o,u,c){var h=0,p=0;if(g==null||(h=a(g,u))!==(p=a(o,u))||d(g,o)<0^u>0)do c.point(h===0||h===3?n:r,h>1?i:t);while((h=(h+u+4)%4)!==p);else c.point(o[0],o[1])}function a(g,o){return T(g[0]-n)<_?o>0?0:3:T(g[0]-r)<_?o>0?2:1:T(g[1]-t)<_?o>0?1:0:o>0?3:2}function f(g,o){return d(g.x,o.x)}function d(g,o){var u=a(g,1),c=a(o,1);return u!==c?u-c:u===0?o[1]-g[1]:u===1?g[0]-o[0]:u===2?g[1]-o[1]:o[0]-g[0]}return function(g){var o=g,u=It(),c,h,p,w,S,E,y,v,M,P,m,A={point:L,lineStart:O,lineEnd:Y,polygonStart:X,polygonEnd:R};function L(s,$){e(s,$)&&o.point(s,$)}function I(){for(var s=0,$=0,q=h.length;$<q;++$)for(var Z=h[$],W=1,an=Z.length,U=Z[0],k,V,En=U[0],rn=U[1];W<an;++W)k=En,V=rn,U=Z[W],En=U[0],rn=U[1],V<=i?rn>i&&(En-k)*(i-V)>(rn-V)*(n-k)&&++s:rn<=i&&(En-k)*(i-V)<(rn-V)*(n-k)&&--s;return s}function X(){o=u,c=[],h=[],m=!0}function R(){var s=I(),$=m&&s,q=(c=Nt(c)).length;($||q)&&(g.polygonStart(),$&&(g.lineStart(),l(null,null,1,g),g.lineEnd()),q&&At(c,f,s,l,g),g.polygonEnd()),o=g,c=h=p=null}function O(){A.point=z,h&&h.push(p=[]),P=!0,M=!1,y=v=NaN}function Y(){c&&(z(w,S),E&&M&&u.rejoin(),c.push(u.result())),A.point=L,M&&o.lineEnd()}function z(s,$){var q=e(s,$);if(h&&p.push([s,$]),P)w=s,S=$,E=q,P=!1,q&&(o.lineStart(),o.point(s,$));else if(q&&M)o.point(s,$);else{var Z=[y=Math.max(Pn,Math.min(cn,y)),v=Math.max(Pn,Math.min(cn,v))],W=[s=Math.max(Pn,Math.min(cn,s)),$=Math.max(Pn,Math.min(cn,$))];ui(Z,W,n,t,r,i)?(M||(o.lineStart(),o.point(Z[0],Z[1])),o.point(W[0],W[1]),q||o.lineEnd(),m=!1):q&&(o.lineStart(),o.point(s,$),m=!1)}y=s,v=$,M=q}return A}}function pt(n,t,r){var i=on(n,t-_,r).concat(t);return function(e){return i.map(function(l){return[e,l]})}}function ht(n,t,r){var i=on(n,t-_,r).concat(t);return function(e){return i.map(function(l){return[l,e]})}}function li(){var n,t,r,i,e,l,a,f,d=10,g=d,o=90,u=360,c,h,p,w,S=2.5;function E(){return{type:"MultiLineString",coordinates:y()}}function y(){return on(Mn(i/o)*o,r,o).map(p).concat(on(Mn(f/u)*u,a,u).map(w)).concat(on(Mn(t/d)*d,n,d).filter(function(v){return T(v%o)>_}).map(c)).concat(on(Mn(l/g)*g,e,g).filter(function(v){return T(v%u)>_}).map(h))}return E.lines=function(){return y().map(function(v){return{type:"LineString",coordinates:v}})},E.outline=function(){return{type:"Polygon",coordinates:[p(i).concat(w(a).slice(1),p(r).reverse().slice(1),w(f).reverse().slice(1))]}},E.extent=function(v){return arguments.length?E.extentMajor(v).extentMinor(v):E.extentMinor()},E.extentMajor=function(v){return arguments.length?(i=+v[0][0],r=+v[1][0],f=+v[0][1],a=+v[1][1],i>r&&(v=i,i=r,r=v),f>a&&(v=f,f=a,a=v),E.precision(S)):[[i,f],[r,a]]},E.extentMinor=function(v){return arguments.length?(t=+v[0][0],n=+v[1][0],l=+v[0][1],e=+v[1][1],t>n&&(v=t,t=n,n=v),l>e&&(v=l,l=e,e=v),E.precision(S)):[[t,l],[n,e]]},E.step=function(v){return arguments.length?E.stepMajor(v).stepMinor(v):E.stepMinor()},E.stepMajor=function(v){return arguments.length?(o=+v[0],u=+v[1],E):[o,u]},E.stepMinor=function(v){return arguments.length?(d=+v[0],g=+v[1],E):[d,g]},E.precision=function(v){return arguments.length?(S=+v,c=pt(l,e,90),h=ht(t,n,S),p=pt(f,a,90),w=ht(i,r,S),E):S},E.extentMajor([[-180,-90+_],[180,90-_]]).extentMinor([[-180,-80-_],[180,80+_]])}function Yi(){return li()()}const Hn=n=>n;var Dn=new b,Wn=new b,Tt,Xt,xn,Jn,j={point:x,lineStart:x,lineEnd:x,polygonStart:function(){j.lineStart=ai,j.lineEnd=si},polygonEnd:function(){j.lineStart=j.lineEnd=j.point=x,Dn.add(T(Wn)),Wn=new b},result:function(){var n=Dn/2;return Dn=new b,n}};function ai(){j.point=ci}function ci(n,t){j.point=Yt,Tt=xn=n,Xt=Jn=t}function Yt(n,t){Wn.add(Jn*n-xn*t),xn=n,Jn=t}function si(){Yt(Tt,Xt)}const gt=j;var ln=1/0,_n=ln,Sn=-ln,Ln=Sn,pi={point:hi,lineStart:x,lineEnd:x,polygonStart:x,polygonEnd:x,result:function(){var n=[[ln,_n],[Sn,Ln]];return Sn=Ln=-(_n=ln=1/0),n}};function hi(n,t){n<ln&&(ln=n),n>Sn&&(Sn=n),t<_n&&(_n=t),t>Ln&&(Ln=t)}const In=pi;var Kn=0,Qn=0,sn=0,An=0,zn=0,un=0,Un=0,Vn=0,pn=0,Ct,Dt,K,Q,J={point:nn,lineStart:vt,lineEnd:dt,polygonStart:function(){J.lineStart=di,J.lineEnd=Si},polygonEnd:function(){J.point=nn,J.lineStart=vt,J.lineEnd=dt},result:function(){var n=pn?[Un/pn,Vn/pn]:un?[An/un,zn/un]:sn?[Kn/sn,Qn/sn]:[NaN,NaN];return Kn=Qn=sn=An=zn=un=Un=Vn=pn=0,n}};function nn(n,t){Kn+=n,Qn+=t,++sn}function vt(){J.point=gi}function gi(n,t){J.point=vi,nn(K=n,Q=t)}function vi(n,t){var r=n-K,i=t-Q,e=tn(r*r+i*i);An+=e*(K+n)/2,zn+=e*(Q+t)/2,un+=e,nn(K=n,Q=t)}function dt(){J.point=nn}function di(){J.point=Ei}function Si(){Ft(Ct,Dt)}function Ei(n,t){J.point=Ft,nn(Ct=K=n,Dt=Q=t)}function Ft(n,t){var r=n-K,i=t-Q,e=tn(r*r+i*i);An+=e*(K+n)/2,zn+=e*(Q+t)/2,un+=e,e=Q*n-K*t,Un+=e*(K+n),Vn+=e*(Q+t),pn+=e*3,nn(K=n,Q=t)}const St=J;function qt(n){this._context=n}qt.prototype={_radius:4.5,pointRadius:function(n){return this._radius=n,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(n,t){switch(this._point){case 0:{this._context.moveTo(n,t),this._point=1;break}case 1:{this._context.lineTo(n,t);break}default:{this._context.moveTo(n+this._radius,t),this._context.arc(n,t,this._radius,0,H);break}}},result:x};var jn=new b,Fn,Ot,Zt,hn,gn,Tn={point:x,lineStart:function(){Tn.point=Mi},lineEnd:function(){Fn&&Bt(Ot,Zt),Tn.point=x},polygonStart:function(){Fn=!0},polygonEnd:function(){Fn=null},result:function(){var n=+jn;return jn=new b,n}};function Mi(n,t){Tn.point=Bt,Ot=hn=n,Zt=gn=t}function Bt(n,t){hn-=n,gn-=t,jn.add(tn(hn*hn+gn*gn)),hn=n,gn=t}const Et=Tn;let Mt,Xn,yt,wt;class Rt{constructor(t){this._append=t==null?Gt:yi(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,r){switch(this._point){case 0:{this._append`M${t},${r}`,this._point=1;break}case 1:{this._append`L${t},${r}`;break}default:{if(this._append`M${t},${r}`,this._radius!==yt||this._append!==Xn){const i=this._radius,e=this._;this._="",this._append`m0,${i}a${i},${i} 0 1,1 0,${-2*i}a${i},${i} 0 1,1 0,${2*i}z`,yt=i,Xn=this._append,wt=this._,this._=e}this._+=wt;break}}}result(){const t=this._;return this._="",t.length?t:null}}function Gt(n){let t=1;this._+=n[0];for(const r=n.length;t<r;++t)this._+=arguments[t]+n[t]}function yi(n){const t=Math.floor(n);if(!(t>=0))throw new RangeError(`invalid digits: ${n}`);if(t>15)return Gt;if(t!==Mt){const r=10**t;Mt=t,Xn=function(e){let l=1;this._+=e[0];for(const a=e.length;l<a;++l)this._+=Math.round(arguments[l]*r)/r+e[l]}}return Xn}function Ci(n,t){let r=3,i=4.5,e,l;function a(f){return f&&(typeof i=="function"&&l.pointRadius(+i.apply(this,arguments)),en(f,e(l))),l.result()}return a.area=function(f){return en(f,e(gt)),gt.result()},a.measure=function(f){return en(f,e(Et)),Et.result()},a.bounds=function(f){return en(f,e(In)),In.result()},a.centroid=function(f){return en(f,e(St)),St.result()},a.projection=function(f){return arguments.length?(e=f==null?(n=null,Hn):(n=f).stream,a):n},a.context=function(f){return arguments.length?(l=f==null?(t=null,new Rt(r)):new qt(t=f),typeof i!="function"&&l.pointRadius(i),a):t},a.pointRadius=function(f){return arguments.length?(i=typeof f=="function"?f:(l.pointRadius(+f),+f),a):i},a.digits=function(f){if(!arguments.length)return r;if(f==null)r=null;else{const d=Math.floor(f);if(!(d>=0))throw new RangeError(`invalid digits: ${f}`);r=d}return t===null&&(l=new Rt(r)),a},a.projection(n).digits(r).context(t)}function bn(n){return function(t){var r=new kn;for(var i in n)r[i]=n[i];return r.stream=t,r}}function kn(){}kn.prototype={constructor:kn,point:function(n,t){this.stream.point(n,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function nt(n,t,r){var i=n.clipExtent&&n.clipExtent();return n.scale(150).translate([0,0]),i!=null&&n.clipExtent(null),en(r,n.stream(In)),t(In.result()),i!=null&&n.clipExtent(i),n}function Ht(n,t,r){return nt(n,function(i){var e=t[1][0]-t[0][0],l=t[1][1]-t[0][1],a=Math.min(e/(i[1][0]-i[0][0]),l/(i[1][1]-i[0][1])),f=+t[0][0]+(e-a*(i[1][0]+i[0][0]))/2,d=+t[0][1]+(l-a*(i[1][1]+i[0][1]))/2;n.scale(150*a).translate([f,d])},r)}function wi(n,t,r){return Ht(n,[[0,0],t],r)}function Ri(n,t,r){return nt(n,function(i){var e=+t,l=e/(i[1][0]-i[0][0]),a=(e-l*(i[1][0]+i[0][0]))/2,f=-l*i[0][1];n.scale(150*l).translate([a,f])},r)}function Pi(n,t,r){return nt(n,function(i){var e=+t,l=e/(i[1][1]-i[0][1]),a=-l*i[0][0],f=(e-l*(i[1][1]+i[0][1]))/2;n.scale(150*l).translate([a,f])},r)}var Pt=16,mi=C(30*F);function mt(n,t){return+t?Ni(n,t):$i(n)}function $i(n){return bn({point:function(t,r){t=n(t,r),this.stream.point(t[0],t[1])}})}function Ni(n,t){function r(i,e,l,a,f,d,g,o,u,c,h,p,w,S){var E=g-i,y=o-e,v=E*E+y*y;if(v>4*t&&w--){var M=a+c,P=f+h,m=d+p,A=tn(M*M+P*P+m*m),L=dn(m/=A),I=T(T(m)-1)<_||T(l-u)<_?(l+u)/2:vn(P,M),X=n(I,L),R=X[0],O=X[1],Y=R-i,z=O-e,s=y*Y-E*z;(s*s/v>t||T((E*Y+y*z)/v-.5)>.3||a*c+f*h+d*p<mi)&&(r(i,e,l,a,f,d,R,O,I,M/=A,P/=A,m,w,S),S.point(R,O),r(R,O,I,M,P,m,g,o,u,c,h,p,w,S))}}return function(i){var e,l,a,f,d,g,o,u,c,h,p,w,S={point:E,lineStart:y,lineEnd:M,polygonStart:function(){i.polygonStart(),S.lineStart=P},polygonEnd:function(){i.polygonEnd(),S.lineStart=y}};function E(L,I){L=n(L,I),i.point(L[0],L[1])}function y(){u=NaN,S.point=v,i.lineStart()}function v(L,I){var X=fn([L,I]),R=n(L,I);r(u,c,o,h,p,w,u=R[0],c=R[1],o=L,h=X[0],p=X[1],w=X[2],Pt,i),i.point(u,c)}function M(){S.point=E,i.lineEnd()}function P(){y(),S.point=m,S.lineEnd=A}function m(L,I){v(e=L,I),l=u,a=c,f=h,d=p,g=w,S.point=v}function A(){r(u,c,o,h,p,w,l,a,e,f,d,g,Pt,i),S.lineEnd=M,M()}return S}}var _i=bn({point:function(n,t){this.stream.point(n*F,t*F)}});function Li(n){return bn({point:function(t,r){var i=n(t,r);return this.stream.point(i[0],i[1])}})}function Ii(n,t,r,i,e){function l(a,f){return a*=i,f*=e,[t+n*a,r-n*f]}return l.invert=function(a,f){return[(a-t)/n*i,(r-f)/n*e]},l}function $t(n,t,r,i,e,l){if(!l)return Ii(n,t,r,i,e);var a=C(l),f=D(l),d=a*n,g=f*n,o=a/n,u=f/n,c=(f*r-a*t)/n,h=(f*t+a*r)/n;function p(w,S){return w*=i,S*=e,[d*w-g*S+t,r-g*w-d*S]}return p.invert=function(w,S){return[i*(o*w-u*S+c),e*(h-u*w-o*S)]},p}function Ai(n){return zi(function(){return n})()}function zi(n){var t,r=150,i=480,e=250,l=0,a=0,f=0,d=0,g=0,o,u=0,c=1,h=1,p=null,w=st,S=null,E,y,v,M=Hn,P=.5,m,A,L,I,X;function R(s){return L(s[0]*F,s[1]*F)}function O(s){return s=L.invert(s[0],s[1]),s&&[s[0]*G,s[1]*G]}R.stream=function(s){return I&&X===s?I:I=_i(Li(o)(w(m(M(X=s)))))},R.preclip=function(s){return arguments.length?(w=s,p=void 0,z()):w},R.postclip=function(s){return arguments.length?(M=s,S=E=y=v=null,z()):M},R.clipAngle=function(s){return arguments.length?(w=+s?oi(p=s*F):(p=null,st),z()):p*G},R.clipExtent=function(s){return arguments.length?(M=s==null?(S=E=y=v=null,Hn):fi(S=+s[0][0],E=+s[0][1],y=+s[1][0],v=+s[1][1]),z()):S==null?null:[[S,E],[y,v]]},R.scale=function(s){return arguments.length?(r=+s,Y()):r},R.translate=function(s){return arguments.length?(i=+s[0],e=+s[1],Y()):[i,e]},R.center=function(s){return arguments.length?(l=s[0]%360*F,a=s[1]%360*F,Y()):[l*G,a*G]},R.rotate=function(s){return arguments.length?(f=s[0]%360*F,d=s[1]%360*F,g=s.length>2?s[2]%360*F:0,Y()):[f*G,d*G,g*G]},R.angle=function(s){return arguments.length?(u=s%360*F,Y()):u*G},R.reflectX=function(s){return arguments.length?(c=s?-1:1,Y()):c<0},R.reflectY=function(s){return arguments.length?(h=s?-1:1,Y()):h<0},R.precision=function(s){return arguments.length?(m=mt(A,P=s*s),z()):tn(P)},R.fitExtent=function(s,$){return Ht(R,s,$)},R.fitSize=function(s,$){return wi(R,s,$)},R.fitWidth=function(s,$){return Ri(R,s,$)},R.fitHeight=function(s,$){return Pi(R,s,$)};function Y(){var s=$t(r,0,0,c,h,u).apply(null,t(l,a)),$=$t(r,i-s[0],e-s[1],c,h,u);return o=Lt(f,d,g),A=Bn(t,$),L=Bn(o,A),m=mt(A,P),z()}function z(){return I=X=null,R}return function(){return t=n.apply(this,arguments),R.invert=t.invert&&O,Y()}}function tt(n,t){return[n,Kt(Ut((B+t)/2))]}tt.invert=function(n,t){return[n,2*_t(Jt(t))-B]};function Di(){return Ti(tt).scale(961/H)}function Ti(n){var t=Ai(n),r=t.center,i=t.scale,e=t.translate,l=t.clipExtent,a=null,f,d,g;t.scale=function(u){return arguments.length?(i(u),o()):i()},t.translate=function(u){return arguments.length?(e(u),o()):e()},t.center=function(u){return arguments.length?(r(u),o()):r()},t.clipExtent=function(u){return arguments.length?(u==null?a=f=d=g=null:(a=+u[0][0],f=+u[0][1],d=+u[1][0],g=+u[1][1]),o()):a==null?null:[[a,f],[d,g]]};function o(){var u=N*i(),c=t(jt(t.rotate()).invert([0,0]));return l(a==null?[[c[0]-u,c[1]-u],[c[0]+u,c[1]+u]]:n===tt?[[Math.max(c[0]-u,a),f],[Math.min(c[0]+u,d),g]]:[[a,Math.max(c[1]-u,f)],[d,Math.min(c[1]+u,g)]])}return o()}export{Yi as g,Ci as i,Di as m};
