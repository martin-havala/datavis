import{S as Nt,i as Gt,s as Qt,k as Zt,J as n,q as m,l as te,m as s,K as o,h as r,r as v,n as e,p as y,b as ee,H as a,C as Mt,o as ae,w as re}from"../chunks/index.0cb42cb9.js";import"../chunks/transform.f0a34255.js";import{c as jt,a as W,s as Jt}from"../chunks/helpers.41dfc2ba.js";import{s as se}from"../chunks/select.84cbef7e.js";function Kt(E,g){let i=0,c=0;if(g===void 0)for(let d of E)d!=null&&(d=+d)>=d&&(++i,c+=d);else{let d=-1;for(let u of E)(u=g(u,++d,E))!=null&&(u=+u)>=u&&(++i,c+=u)}if(i)return c/i}function ne(E){let g,i,c,d,u,w,h,M,p,f,x,nt,k,H,b,R,t,l,$,ct,_,L,q,D,it,A,F,J,dt,C,T,K,pt,B,N,G,ft,z,U,Q,ut,I,Z,ht,S,tt,gt,P,V,et,xt,O,X,at,_t;return{c(){g=Zt("section"),i=n("svg"),c=n("defs"),d=n("marker"),u=n("path"),w=n("g"),h=n("text"),M=n("textPath"),p=m("alive people by rank"),f=n("g"),x=n("text"),nt=m("Oldest living people"),k=n("text"),H=m("Verified list of the oldest people"),b=n("text"),R=n("a"),t=m("datasources: wikipedia"),l=n("text"),$=n("a"),ct=m("clio-infra"),_=n("g"),L=n("g"),q=n("path"),D=n("text"),it=m("male"),A=n("g"),F=n("path"),J=n("text"),dt=m("female "),C=n("g"),T=n("path"),K=n("text"),pt=m("alive"),B=n("g"),N=n("path"),G=n("text"),ft=m("deceased"),z=n("g"),U=n("path"),Q=n("text"),ut=m("world average"),I=n("g"),Z=n("text"),ht=m("life expectancy"),S=n("g"),tt=n("text"),gt=m("per country:"),P=n("g"),V=n("circle"),et=n("text"),xt=m("at birth"),O=n("g"),X=n("circle"),at=n("text"),_t=m("recent"),this.h()},l(rt){g=te(rt,"SECTION",{});var ot=s(g);i=o(ot,"svg",{width:!0,height:!0,viewBox:!0,"xmlns:xlink":!0,class:!0});var st=s(i);c=o(st,"defs",{});var $t=s(c);d=o($t,"marker",{id:!0,viewBox:!0,refX:!0,refY:!0,markerUnits:!0,markerWidth:!0,markerHeight:!0,orient:!0});var Rt=s(d);u=o(Rt,"path",{d:!0,style:!0}),s(u).forEach(r),Rt.forEach(r),$t.forEach(r),w=o(st,"g",{}),s(w).forEach(r),h=o(st,"text",{style:!0});var Lt=s(h);M=o(Lt,"textPath",{href:!0,startOffset:!0,"text-anchor":!0});var At=s(M);p=v(At,"alive people by rank"),At.forEach(r),Lt.forEach(r),f=o(st,"g",{class:!0,transform:!0});var Y=s(f);x=o(Y,"text",{x:!0,y:!0,style:!0});var Ct=s(x);nt=v(Ct,"Oldest living people"),Ct.forEach(r),k=o(Y,"text",{x:!0,y:!0,style:!0});var Bt=s(k);H=v(Bt,"Verified list of the oldest people"),Bt.forEach(r),b=o(Y,"text",{x:!0,y:!0,style:!0});var zt=s(b);R=o(zt,"a",{href:!0});var Pt=s(R);t=v(Pt,"datasources: wikipedia"),Pt.forEach(r),zt.forEach(r),l=o(Y,"text",{x:!0,y:!0,style:!0});var Ot=s(l);$=o(Ot,"a",{href:!0});var Ht=s($);ct=v(Ht,"clio-infra"),Ht.forEach(r),Ot.forEach(r),_=o(Y,"g",{transform:!0});var j=s(_);L=o(j,"g",{class:!0,transform:!0});var mt=s(L);q=o(mt,"path",{d:!0,class:!0}),s(q).forEach(r),D=o(mt,"text",{});var It=s(D);it=v(It,"male"),It.forEach(r),mt.forEach(r),A=o(j,"g",{class:!0,transform:!0});var vt=s(A);F=o(vt,"path",{d:!0,class:!0}),s(F).forEach(r),J=o(vt,"text",{});var St=s(J);dt=v(St,"female "),St.forEach(r),vt.forEach(r),C=o(j,"g",{class:!0,transform:!0});var Et=s(C);T=o(Et,"path",{d:!0,class:!0}),s(T).forEach(r),K=o(Et,"text",{});var Wt=s(K);pt=v(Wt,"alive"),Wt.forEach(r),Et.forEach(r),B=o(j,"g",{class:!0,transform:!0});var kt=s(B);N=o(kt,"path",{d:!0}),s(N).forEach(r),G=o(kt,"text",{});var qt=s(G);ft=v(qt,"deceased"),qt.forEach(r),kt.forEach(r),z=o(j,"g",{class:!0,transform:!0});var yt=s(z);U=o(yt,"path",{d:!0,class:!0}),s(U).forEach(r),Q=o(yt,"text",{});var Ft=s(Q);ut=v(Ft,"world average"),Ft.forEach(r),yt.forEach(r),I=o(j,"g",{class:!0,transform:!0});var Tt=s(I);Z=o(Tt,"text",{});var Ut=s(Z);ht=v(Ut,"life expectancy"),Ut.forEach(r),Tt.forEach(r),S=o(j,"g",{class:!0,transform:!0});var Vt=s(S);tt=o(Vt,"text",{});var Xt=s(tt);gt=v(Xt,"per country:"),Xt.forEach(r),Vt.forEach(r),P=o(j,"g",{class:!0,transform:!0});var bt=s(P);V=o(bt,"circle",{cx:!0,r:!0}),s(V).forEach(r),et=o(bt,"text",{});var Yt=s(et);xt=v(Yt,"at birth"),Yt.forEach(r),bt.forEach(r),O=o(j,"g",{class:!0,transform:!0});var wt=s(O);X=o(wt,"circle",{cx:!0,r:!0}),s(X).forEach(r),at=o(wt,"text",{});var Dt=s(at);_t=v(Dt,"recent"),Dt.forEach(r),wt.forEach(r),j.forEach(r),Y.forEach(r),st.forEach(r),ot.forEach(r),this.h()},h(){e(u,"d","M 0 0 L 10 5 L 0 10 z"),y(u,"fill","currentColor"),y(u,"fill-opacity","0.5"),e(d,"id","triangleMarker"),e(d,"viewBox","0 0 10 10"),e(d,"refX","1"),e(d,"refY","5"),e(d,"markerUnits","strokeWidth"),e(d,"markerWidth","10"),e(d,"markerHeight","10"),e(d,"orient","auto"),e(M,"href","#local_people_contours_rank2"),e(M,"startOffset","50%"),e(M,"text-anchor","middle"),y(h,"font-size",".9em"),y(h,"opacity","0.5"),e(x,"x","70"),e(x,"y","0"),y(x,"font-size","3em"),y(x,"text-anchor","end"),e(k,"x","70"),e(k,"y","50"),y(k,"font-size",".9em"),y(k,"text-anchor","end"),e(R,"href","https://en.wikipedia.org/wiki/List_of_verified_oldest_people"),e(b,"x","70"),e(b,"y","100"),y(b,"font-size",".8em"),y(b,"text-anchor","end"),e($,"href","https://clio-infra.eu/Indicators/LifeExpectancyatBirthTotal.html"),e(l,"x","70"),e(l,"y","120"),y(l,"font-size",".8em"),y(l,"text-anchor","end"),e(q,"d","M0,0 h27"),e(q,"class","person_contour alive"),e(L,"class","male alive"),e(L,"transform","translate(0, 120)"),e(F,"d","M0,0 h27"),e(F,"class","person_contour alive"),e(A,"class","female alive"),e(A,"transform","translate(0, 140)"),e(T,"d","M0,0 h27"),e(T,"class","person_contour alive"),e(C,"class","alive"),e(C,"transform","translate(0, 180)"),e(N,"d","M0,0 h27"),e(B,"class","person_contour deceased"),e(B,"transform","translate(0, 200)"),e(U,"d","M0,0 h27"),e(U,"class","average"),e(z,"class","avg_contour"),e(z,"transform","translate(0, 240)"),e(I,"class","expectation"),e(I,"transform","translate(-35, 280)"),e(S,"class","expectation"),e(S,"transform","translate(-35, 295)"),e(V,"cx","13.5"),e(V,"r","3"),e(P,"class","expectation birth"),e(P,"transform","translate(0, 320)"),e(X,"cx","13.5"),e(X,"r","3"),e(O,"class","expectation recent"),e(O,"transform","translate(0, 340)"),e(_,"transform","translate(-10, 50)"),e(f,"class","side_legend"),e(f,"transform","translate(680, 50)"),e(i,"width","800"),e(i,"height","800"),e(i,"viewBox","0 0 800 800"),e(i,"xmlns:xlink","http://www.w3.org/1999/xlink"),e(i,"class","svelte-1ty53ph")},m(rt,ot){ee(rt,g,ot),a(g,i),a(i,c),a(c,d),a(d,u),a(i,w),E[2](w),a(i,h),a(h,M),a(M,p),a(i,f),a(f,x),a(x,nt),a(f,k),a(k,H),a(f,b),a(b,R),a(R,t),a(f,l),a(l,$),a($,ct),a(f,_),a(_,L),a(L,q),a(L,D),a(D,it),a(_,A),a(A,F),a(A,J),a(J,dt),a(_,C),a(C,T),a(C,K),a(K,pt),a(_,B),a(B,N),a(B,G),a(G,ft),a(_,z),a(z,U),a(z,Q),a(Q,ut),a(_,I),a(I,Z),a(Z,ht),a(_,S),a(S,tt),a(tt,gt),a(_,P),a(P,V),a(P,et),a(et,xt),a(_,O),a(O,X),a(O,at),a(at,_t)},p:Mt,i:Mt,o:Mt,d(rt){rt&&r(g),E[2](null)}}}function lt(E,g,i=12){E.append("text").attr("class","label").attr("transform",`translate(${i},0)`).text(g),E.append("circle").attr("r",3),i>15&&E.append("path").attr("class","label__line").attr("d",`M0,0 h${i-5}`)}function oe(E,g,i){let{data:c}=g;const d=c.centenarians.reduce((p,f)=>p.find(x=>x.age==f.age&&x.gender==f.gender&&x.still_alive==f.still_alive)?p:[...p,f],[]),u=[{gender:"male",age:70,label:"average"},{gender:"female",age:75,label:"average"}];let w,h;ae(()=>{h=se(w),h.append("g").attr("class","contours").selectAll("g").data(c.contours.filter((t,l)=>l%5==0&&l<121)).join("path").attr("class","contour").attr("d",jt);const p=[Kt(c.contours[0].map(t=>t[0])),Kt(c.contours[0].map(t=>t[1]))];h.append("g").attr("class","person_contours").selectAll("g").data(d).join("g").attr("class",t=>`person_contour ${t.still_alive} ${t.gender} ${t.aliveRank==1?"oldest":""}`).append("path").attr("d",t=>jt(c.contours[Math.floor(t.age)]));const x=u.map(t=>({grp:t,path:c.contours[Math.floor(t.age)]}));h.selectAll("g.avg_contours").data(x).join("g").attr("class",t=>`avg_contour ${t.grp.gender}`).append("path").attr("d",t=>jt(t.path));const k=h.append("g").attr("class","people_contours_labels").selectAll("g").data(c.centenarians.filter(t=>!!t.aliveRank).map(t=>{const l=80-8*(t.aliveRankAbs??0);return{c:t,pAge:W(c.contours[t.age],p,l),p0:W(c.contours[0],p,l),pBE:W(c.contours[Math.round(t.birth_exp??0)],p,l),pRE:W(c.contours[Math.round(t.exp_recent??0)],p,l)}})).join("g").attr("class",({c:t})=>`${t.gender} expectation`);lt(k.append("g").attr("transform",({pAge:t})=>`translate(${t==null?void 0:t.join()})`),({c:t})=>t.aliveRank?`${t.name}`:"");const H=k.append("g").attr("class","expectation");H.append("path").attr("d",t=>{var l,$;return`M${(l=t.p0)==null?void 0:l.join()} L${($=t.pAge)==null?void 0:$.join()}`}),lt(H.append("g").attr("class","expectation birth label").attr("transform",t=>{var l;return`translate(${(l=t.pBE)==null?void 0:l.join()})`}),({c:t})=>`${(+(t.birth_exp??0)).toFixed(1)}`),lt(H.append("g").attr("class","recent label").attr("transform",t=>{var l;return`translate(${(l=t.pRE)==null?void 0:l.join()})`}),({c:t})=>`${(+(t.exp_recent??0)).toFixed(1)}`),h.selectAll("path#people_contours_rank").data([c.centenarians.filter(t=>!!t.aliveRank)]).join("path").attr("id","people_contours_rank").style("marker-end","url(#triangleMarker)").attr("stroke","red").attr("d",t=>Jt(t.map(l=>W(c.contours[130+2],p,62-(l.aliveRankAbs??0)*1.6)))),h.selectAll("defs").data([c.centenarians.filter(t=>!!t.aliveRank)]).join("path").attr("id","local_people_contours_rank2").attr("display","none").attr("d",t=>Jt(t.map(l=>W(c.contours[131+2],p,62-(l.aliveRankAbs??0)*1.6))));const b=c.contours.filter((t,l)=>l%10==0&&l<130).map(t=>W(t,p,86)),R=h.append("g").attr("class","legend").selectAll("g").data(b).join("g").attr("transform",t=>`translate(${t==null?void 0:t.join()})`).style("display",(t,l)=>l?"visible":"none");lt(R,(t,l)=>`${l*10}`)});function M(p){re[p?"unshift":"push"](()=>{w=p,i(0,w)})}return E.$$set=p=>{"data"in p&&i(1,c=p.data)},[w,c,M]}class pe extends Nt{constructor(g){super(),Gt(this,g,oe,ne,Qt,{data:1})}}export{pe as default};
