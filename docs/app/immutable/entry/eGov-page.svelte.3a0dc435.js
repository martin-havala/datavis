import{S as Tt,i as It,s as St,a as I,k as G,J as N,q as B,P as Ct,h as m,c as S,l as M,m as g,K as q,r as P,n as l,b as yt,G as i,H as ft,o as Yt,w as xt}from"../chunks/index.b63d9627.js";import"../chunks/transform.f0a34255.js";import{m as Gt,b as Nt}from"../chunks/band.41fc2bb8.js";import{d as Mt,n as qt,e as At}from"../chunks/linear.2f9814ba.js";import{e as Ft}from"../chunks/extent.4cf1c809.js";import{c as Lt}from"../chunks/dsv.6b9e725e.js";import{s as k}from"../chunks/select.84cbef7e.js";import{a as $t}from"../chunks/axis.a25b44c4.js";import{c as Bt}from"../chunks/colors.98f238a0.js";function Pt(t=Mt){if(t===Mt)return bt;if(typeof t!="function")throw new TypeError("compare is not a function");return(s,e)=>{const a=t(s,e);return a||a===0?a:(t(e,e)===0)-(t(s,s)===0)}}function bt(t,s){return(t==null||!(t>=t))-(s==null||!(s>=s))||(t<s?-1:t>s?1:0)}function Dt(t,s){let e;if(s===void 0)for(const a of t)a!=null&&(e>a||e===void 0&&a>=a)&&(e=a);else{let a=-1;for(let r of t)(r=s(r,++a,t))!=null&&(e>r||e===void 0&&r>=r)&&(e=r)}return e}function Et(t,s,e=0,a=1/0,r){if(s=Math.floor(s),e=Math.floor(Math.max(0,e)),a=Math.floor(Math.min(t.length-1,a)),!(e<=s&&s<=a))return t;for(r=r===void 0?bt:Pt(r);a>e;){if(a-e>600){const v=a-e+1,u=s-e+1,D=Math.log(v),_=.5*Math.exp(2*D/3),A=.5*Math.sqrt(D*_*(v-_)/v)*(u-v/2<0?-1:1),E=Math.max(e,Math.floor(s-u*_/v+A)),C=Math.min(a,Math.floor(s+(v-u)*_/v+A));Et(t,s,E,C,r)}const p=t[s];let f=e,o=a;for(K(t,e,s),r(t[a],p)>0&&K(t,e,a);f<o;){for(K(t,f,o),++f,--o;r(t[f],p)<0;)++f;for(;r(t[o],p)>0;)--o}r(t[e],p)===0?K(t,e,o):(++o,K(t,o,a)),o<=s&&(e=o+1),s<=o&&(a=o-1)}return t}function K(t,s,e){const a=t[s];t[s]=t[e],t[e]=a}function Rt(t,s,e){if(t=Float64Array.from(qt(t,e)),!(!(a=t.length)||isNaN(s=+s))){if(s<=0||a<2)return Dt(t);if(s>=1)return Gt(t);var a,r=(a-1)*s,p=Math.floor(r),f=Gt(Et(t,p).subarray(0,p+1)),o=Dt(t.subarray(p+1));return f+(o-f)*(r-p)}}function wt(t,s){return Rt(t,.5,s)}function Ot(t){for(var s in t){var e=t[s].trim(),a,r;if(!e)e=null;else if(e==="true")e=!0;else if(e==="false")e=!1;else if(e==="NaN")e=NaN;else if(!isNaN(a=+e))e=a;else if(r=e.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/))Ht&&r[4]&&!r[7]&&(e=e.replace(/-/g,"/").replace(/T/," ")),e=new Date(e);else continue;t[s]=e}return t}const Ht=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours(),Vt=Bt("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab"),Wt=""+new URL("../assets/e_gov.6dc5baeb.csv",import.meta.url).href;function Ut(t){let s,e,a,r,p,f,o,v,u,D,_,A,E,C,z,h,x,F,H,V,w,y,T,J,n,c,d,L,Y,R,tt,et,W,at,O,nt,st,it,rt,U;return{c(){s=I(),e=G("section"),a=G("div"),r=G("div"),p=I(),f=G("div"),o=G("div"),v=N("svg"),u=N("text"),D=B("Country"),_=N("text"),A=B("GTMI"),E=I(),C=N("svg"),z=I(),h=G("div"),x=G("h1"),F=B("Data Governance"),H=G("br"),V=B(" Maturity Indicators"),w=I(),y=G("i"),T=B("The State of GovTech Foundational Blocks in 198 economies"),J=I(),n=G("br"),c=I(),d=N("svg"),L=N("g"),Y=N("line"),R=N("text"),tt=B("Digital Governance Maturity"),et=I(),W=G("div"),at=B("Data source: "),O=G("a"),nt=B("THE WORLD BANK"),st=I(),it=G("br"),rt=I(),U=N("svg"),this.h()},l($){Ct("svelte-126dile",document.head).forEach(m),s=S($),e=M($,"SECTION",{});var ut=g(e);a=M(ut,"DIV",{class:!0});var Z=g(a);r=M(Z,"DIV",{id:!0,class:!0}),g(r).forEach(m),p=S(Z),f=M(Z,"DIV",{class:!0});var X=g(f);o=M(X,"DIV",{class:!0});var Q=g(o);v=q(Q,"svg",{width:!0,height:!0,class:!0});var lt=g(v);u=q(lt,"text",{x:!0,y:!0});var ht=g(u);D=P(ht,"Country"),ht.forEach(m),_=q(lt,"text",{x:!0,y:!0});var mt=g(_);A=P(mt,"GTMI"),mt.forEach(m),lt.forEach(m),E=S(Q),C=q(Q,"svg",{}),g(C).forEach(m),Q.forEach(m),z=S(X),h=M(X,"DIV",{class:!0});var b=g(h);x=M(b,"H1",{});var j=g(x);F=P(j,"Data Governance"),H=M(j,"BR",{}),V=P(j," Maturity Indicators"),j.forEach(m),w=S(b),y=M(b,"I",{});var vt=g(y);T=P(vt,"The State of GovTech Foundational Blocks in 198 economies"),vt.forEach(m),J=S(b),n=M(b,"BR",{}),c=S(b),d=q(b,"svg",{width:!0,height:!0,class:!0});var ct=g(d);L=q(ct,"g",{class:!0});var gt=g(L);Y=q(gt,"line",{class:!0,x1:!0,x2:!0,y1:!0,y2:!0}),g(Y).forEach(m),gt.forEach(m),R=q(ct,"text",{x:!0,y:!0});var pt=g(R);tt=P(pt,"Digital Governance Maturity"),pt.forEach(m),ct.forEach(m),et=S(b),W=M(b,"DIV",{});var dt=g(W);at=P(dt,"Data source: "),O=M(dt,"A",{href:!0,target:!0});var _t=g(O);nt=P(_t,"THE WORLD BANK"),_t.forEach(m),dt.forEach(m),st=S(b),it=M(b,"BR",{}),b.forEach(m),rt=S(X),U=q(X,"svg",{class:!0}),g(U).forEach(m),X.forEach(m),Z.forEach(m),ut.forEach(m),this.h()},h(){document.title="Data Governance Maturity Indicators",l(r,"id","tooltip"),l(r,"class","svelte-wt852q"),l(u,"x",t[2].left-10),l(u,"y",10),l(_,"x",t[3]+t[2].left+50),l(_,"y",10),l(v,"width","100%"),l(v,"height","20"),l(v,"class","topLegend svelte-wt852q"),l(o,"class","mainChartWrap svelte-wt852q"),l(Y,"class","progress line"),l(Y,"x1","10"),l(Y,"x2","25"),l(Y,"y1","185"),l(Y,"y2","185"),l(L,"class","maturityGroupA"),l(R,"x","30"),l(R,"y","190"),l(d,"width","400"),l(d,"height","200"),l(d,"class","svelte-wt852q"),l(O,"href","https://datacatalog.worldbank.org/search/dataset/0050602/Data-Governance-Maturity-Indicators"),l(O,"target","_blank"),l(h,"class","svgLegend svelte-wt852q"),l(U,"class","svgX svelte-wt852q"),l(f,"class","chart svelte-wt852q"),l(a,"class","page svelte-wt852q")},m($,ot){yt($,s,ot),yt($,e,ot),i(e,a),i(a,r),i(a,p),i(a,f),i(f,o),i(o,v),i(v,u),i(u,D),i(v,_),i(_,A),i(o,E),i(o,C),t[4](C),i(f,z),i(f,h),i(h,x),i(x,F),i(x,H),i(x,V),i(h,w),i(h,y),i(y,T),i(h,J),i(h,n),i(h,c),i(h,d),i(d,L),i(L,Y),i(d,R),i(R,tt),i(h,et),i(h,W),i(W,at),i(W,O),i(O,nt),i(h,st),i(h,it),i(f,rt),i(f,U),t[5](U)},p:ft,i:ft,o:ft,d($){$&&m(s),$&&m(e),t[4](null),t[5](null)}}}function Xt(t,s,e){let a={top:0,right:60,bottom:0,left:50},r=1e3-a.left-a.right,p=2200-a.top-a.bottom,f,o,v,u=[];const D=["UN e-Gov Dev Index_DG Yr","GovTech_GT since","Financial Management Information System_Op Yr","Tax Administration_TMIS Yr","Customs Administration_CMIS Yr","e-Filing_eFil Yr","e-Payment_ePay Yr","Digital Signature_Dsign Yr"],_={"GovTech_GT since":"Establishing GovTech Institution","UN e-Gov Dev Index_DG Yr":"E-Gov strategy launch","Financial Management Information System_Op Yr":"Financial Management IS","Tax Administration_TMIS Yr":"Tax admin system","Customs Administration_CMIS Yr":"Customs administration","e-Filing_eFil Yr":"E-Filing","e-Payment_ePay Yr":"E-Payment","Digital Signature_Dsign Yr":"E-Payment"},A={A:"Optimized / Sustained",B:"Proactive / Operational",C:"Reactive / Discovery",D:"Basic / Nascent"},E=Vt;Yt(()=>{Lt(Wt,Ot).then(h=>{u=h;const x=D.reduce((n,c)=>({...n,[c]:wt(u.map(d=>d[c]))}),{});x["DG Systems & Services_Code"]="World",x["GTMI > Expert opinion for weights_GTMI"]=wt(u.map(n=>n["GTMI > Expert opinion for weights_GTMI"])),x["Data Governance Maturity_Grp"]=u.map(n=>n["Data Governance Maturity_Grp"]).sort()[Math.floor(u.length/2)],x["Country Data_Level"]=u.map(n=>n["Country Data_Level"]).sort()[Math.floor(u.length/2)],u.push(x),u.forEach(n=>{[n.begin,n.end]=Ft(D.map(c=>n[c]).filter(Boolean))}),u.sort((n,c)=>n["DG Systems & Services_Code"]=="World"||n["GTMI > Expert opinion for weights_GTMI"]>c["GTMI > Expert opinion for weights_GTMI"]?-1:1),v=k(f).attr("width",r+a.left+a.right).attr("height",p+a.top+a.bottom).append("g").attr("transform","translate("+a.left+","+a.top+")");const F=At([1975,2020],[0,r]),H=k(".svgLegend svg").selectAll("legend").data(D).join("g").attr("transform",(n,c)=>`translate(10,${20+c*20})`);H.append("circle").attr("cx",10).attr("cy",-4).attr("r",4).attr("fill",(n,c)=>E[c]).attr("stroke",(n,c)=>E[c]),H.append("text").attr("x",20).text(n=>`${_[n]} `),k(o).attr("width",r+a.left+a.right).attr("height",25).append("g").attr("transform","translate("+a.left+",5)").call($t(F).tickFormat(n=>`${n}`)).selectAll("text").style("text-anchor","middle");const V=Nt().domain(u.map(n=>n["DG Systems & Services_Code"])).range([0,p]).paddingOuter(0),w=V.bandwidth()/2;var y=k("#tooltip").style("position","absolute").style("visibility","hidden");const T=v.selectAll("country").data(u).join("g").attr("class",n=>`country ${n["DG Systems & Services_Code"]} ${n["Country Data_Level"]} maturityGroup${n["Data Governance Maturity_Grp"]}`).attr("transform",n=>`translate(0,${V(n["DG Systems & Services_Code"])})`);T.append("rect").attr("class","line background").attr("x",-1-10).attr("width",r+30).attr("height",w*2).attr("fill-opacity",".01").attr("opacity",0),T.append("line").attr("class","label line").attr("x1",n=>0).attr("x2",n=>r+15).attr("y1",w).attr("y2",w).attr("stroke","#444").attr("stroke-width","1"),T.append("line").attr("class","progress line").attr("x1",n=>Math.max(0,F(n.begin))).attr("x2",n=>F(n.end)).attr("y1",w).attr("y2",w).on("mouseover",()=>y.style("visibility","visible")).on("mousemove",(n,c)=>{const d=c["Data Governance Maturity_Grp"];y.html(`Maturity level: <b>${d}</b> <br/>(${A[d]})`),y.style("top",n.pageY+20+"px").style("left",n.pageX+-30+"px")}).on("mouseout",()=>y.style("visibility","hidden")),D.forEach((n,c)=>{T.append("circle").filter(d=>!!d[n]&&!isNaN(d[n])).attr("cx",d=>F(d[n])+c*2-D.length).attr("cy",d=>w).attr("r",4).attr("fill",d=>E[c]).attr("stroke",d=>E[c]).on("mouseover",()=>y.style("visibility","visible")).on("mousemove",(d,L)=>{y.text(`${_[n]}: ${L[n]}`),y.style("top",d.pageY+20+"px").style("left",d.pageX+-30+"px")}).on("mouseout",()=>y.style("visibility","hidden"))}),T.append("g").attr("class","indices").attr("transform",`translate(${r+20},${w})`).append("text").text(n=>{var c;return(c=n["GTMI > Expert opinion for weights_GTMI"])==null?void 0:c.toFixed(3)}),T.append("text").attr("class","label").attr("x",-10).attr("y",w).text(n=>n["DG Systems & Services_Code"])})});function C(h){xt[h?"unshift":"push"](()=>{f=h,e(0,f)})}function z(h){xt[h?"unshift":"push"](()=>{o=h,e(1,o)})}return[f,o,a,r,C,z]}class ae extends Tt{constructor(s){super(),It(this,s,Xt,Ut,St,{})}}export{ae as default};
