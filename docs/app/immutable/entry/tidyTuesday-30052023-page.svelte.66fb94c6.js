import{S as Zt,i as te,s as ee,k as ae,J as n,q as _,l as re,m as s,K as o,h as r,r as m,n as e,p as v,b as se,H as a,C as $t,o as ne,w as oe}from"../chunks/index.0cb42cb9.js";import"../chunks/transform.f0a34255.js";import{c as Rt,a as S,s as Gt}from"../chunks/helpers.41dfc2ba.js";import{s as le}from"../chunks/select.84cbef7e.js";function Qt(k,g){let i=0,c=0;if(g===void 0)for(let p of k)p!=null&&(p=+p)>=p&&(++i,c+=p);else{let p=-1;for(let u of k)(u=g(u,++p,k))!=null&&(u=+u)>=u&&(++i,c+=u)}if(i)return c/i}function ce(k){let g,i,c,p,u,w,h,M,d,f,x,lt,y,O,b,D,t,l,W,$,q,pt,E,R,F,K,dt,L,T,N,ft,A,U,G,ut,C,Q,Z,ht,z,V,tt,gt,H,et,xt,I,at,_t,B,X,rt,mt,P,Y,st,vt;return{c(){g=ae("section"),i=n("svg"),c=n("defs"),p=n("marker"),u=n("path"),w=n("g"),h=n("text"),M=n("textPath"),d=_("alive people in each group"),f=n("g"),x=n("text"),lt=_("Oldest living people"),y=n("text"),O=_("Verified list of the top 100 oldest people per gender"),b=n("text"),D=_("* to 1st June 2023"),t=n("text"),l=n("a"),W=_("datasources: wikipedia"),$=n("text"),q=n("a"),pt=_("clio-infra"),E=n("g"),R=n("g"),F=n("path"),K=n("text"),dt=_("male"),L=n("g"),T=n("path"),N=n("text"),ft=_("female "),A=n("g"),U=n("path"),G=n("text"),ut=_("alive"),C=n("g"),Q=n("path"),Z=n("text"),ht=_("deceased"),z=n("g"),V=n("path"),tt=n("text"),gt=_("world average"),H=n("g"),et=n("text"),xt=_("life expectancy"),I=n("g"),at=n("text"),_t=_("per country:"),B=n("g"),X=n("circle"),rt=n("text"),mt=_("at birth"),P=n("g"),Y=n("circle"),st=n("text"),vt=_("recent"),this.h()},l(nt){g=re(nt,"SECTION",{});var ct=s(g);i=o(ct,"svg",{width:!0,height:!0,viewBox:!0,"xmlns:xlink":!0,class:!0});var ot=s(i);c=o(ot,"defs",{});var Lt=s(c);p=o(Lt,"marker",{id:!0,viewBox:!0,refX:!0,refY:!0,markerUnits:!0,markerWidth:!0,markerHeight:!0,orient:!0});var At=s(p);u=o(At,"path",{d:!0,style:!0}),s(u).forEach(r),At.forEach(r),Lt.forEach(r),w=o(ot,"g",{}),s(w).forEach(r),h=o(ot,"text",{style:!0});var Ct=s(h);M=o(Ct,"textPath",{href:!0,startOffset:!0,"text-anchor":!0});var zt=s(M);d=m(zt,"alive people in each group"),zt.forEach(r),Ct.forEach(r),f=o(ot,"g",{class:!0,transform:!0});var J=s(f);x=o(J,"text",{x:!0,y:!0,style:!0});var Bt=s(x);lt=m(Bt,"Oldest living people"),Bt.forEach(r),y=o(J,"text",{x:!0,y:!0,style:!0});var Pt=s(y);O=m(Pt,"Verified list of the top 100 oldest people per gender"),Pt.forEach(r),b=o(J,"text",{x:!0,y:!0,style:!0});var Ot=s(b);D=m(Ot,"* to 1st June 2023"),Ot.forEach(r),t=o(J,"text",{x:!0,y:!0,style:!0});var Ht=s(t);l=o(Ht,"a",{href:!0});var It=s(l);W=m(It,"datasources: wikipedia"),It.forEach(r),Ht.forEach(r),$=o(J,"text",{x:!0,y:!0,style:!0});var Jt=s($);q=o(Jt,"a",{href:!0});var St=s(q);pt=m(St,"clio-infra"),St.forEach(r),Jt.forEach(r),E=o(J,"g",{transform:!0});var j=s(E);R=o(j,"g",{class:!0,transform:!0});var Et=s(R);F=o(Et,"path",{d:!0,class:!0}),s(F).forEach(r),K=o(Et,"text",{});var Wt=s(K);dt=m(Wt,"male"),Wt.forEach(r),Et.forEach(r),L=o(j,"g",{class:!0,transform:!0});var kt=s(L);T=o(kt,"path",{d:!0,class:!0}),s(T).forEach(r),N=o(kt,"text",{});var qt=s(N);ft=m(qt,"female "),qt.forEach(r),kt.forEach(r),A=o(j,"g",{class:!0,transform:!0});var yt=s(A);U=o(yt,"path",{d:!0,class:!0}),s(U).forEach(r),G=o(yt,"text",{});var Ft=s(G);ut=m(Ft,"alive"),Ft.forEach(r),yt.forEach(r),C=o(j,"g",{class:!0,transform:!0});var bt=s(C);Q=o(bt,"path",{d:!0}),s(Q).forEach(r),Z=o(bt,"text",{});var Tt=s(Z);ht=m(Tt,"deceased"),Tt.forEach(r),bt.forEach(r),z=o(j,"g",{class:!0,transform:!0});var wt=s(z);V=o(wt,"path",{d:!0,class:!0}),s(V).forEach(r),tt=o(wt,"text",{});var Ut=s(tt);gt=m(Ut,"world average"),Ut.forEach(r),wt.forEach(r),H=o(j,"g",{class:!0,transform:!0});var Vt=s(H);et=o(Vt,"text",{});var Xt=s(et);xt=m(Xt,"life expectancy"),Xt.forEach(r),Vt.forEach(r),I=o(j,"g",{class:!0,transform:!0});var Yt=s(I);at=o(Yt,"text",{});var Dt=s(at);_t=m(Dt,"per country:"),Dt.forEach(r),Yt.forEach(r),B=o(j,"g",{class:!0,transform:!0});var Mt=s(B);X=o(Mt,"circle",{cx:!0,r:!0}),s(X).forEach(r),rt=o(Mt,"text",{});var Kt=s(rt);mt=m(Kt,"at birth"),Kt.forEach(r),Mt.forEach(r),P=o(j,"g",{class:!0,transform:!0});var jt=s(P);Y=o(jt,"circle",{cx:!0,r:!0}),s(Y).forEach(r),st=o(jt,"text",{});var Nt=s(st);vt=m(Nt,"recent"),Nt.forEach(r),jt.forEach(r),j.forEach(r),J.forEach(r),ot.forEach(r),ct.forEach(r),this.h()},h(){e(u,"d","M 0 0 L 10 5 L 0 10 z"),v(u,"fill","currentColor"),v(u,"fill-opacity","0.5"),e(p,"id","triangleMarker"),e(p,"viewBox","0 0 10 10"),e(p,"refX","1"),e(p,"refY","5"),e(p,"markerUnits","strokeWidth"),e(p,"markerWidth","10"),e(p,"markerHeight","10"),e(p,"orient","auto"),e(M,"href","#local_people_contours_rank2"),e(M,"startOffset","50%"),e(M,"text-anchor","middle"),v(h,"font-size",".8em"),v(h,"opacity","0.5"),e(x,"x","70"),e(x,"y","0"),v(x,"font-size","3em"),v(x,"text-anchor","end"),e(y,"x","70"),e(y,"y","50"),v(y,"font-size",".9em"),v(y,"text-anchor","end"),e(b,"x","70"),e(b,"y","75"),v(b,"font-size",".7em"),v(b,"text-anchor","end"),v(b,"opacity","0.7"),e(l,"href","https://en.wikipedia.org/wiki/List_of_verified_oldest_people"),e(t,"x","70"),e(t,"y","110"),v(t,"font-size",".8em"),v(t,"text-anchor","end"),e(q,"href","https://clio-infra.eu/Indicators/LifeExpectancyatBirthTotal.html"),e($,"x","70"),e($,"y","130"),v($,"font-size",".8em"),v($,"text-anchor","end"),e(F,"d","M0,0 h27"),e(F,"class","person_contour alive"),e(R,"class","male alive"),e(R,"transform","translate(0, 120)"),e(T,"d","M0,0 h27"),e(T,"class","person_contour alive"),e(L,"class","female alive"),e(L,"transform","translate(0, 140)"),e(U,"d","M0,0 h27"),e(U,"class","person_contour alive"),e(A,"class","alive"),e(A,"transform","translate(0, 180)"),e(Q,"d","M0,0 h27"),e(C,"class","person_contour deceased"),e(C,"transform","translate(0, 200)"),e(V,"d","M0,0 h27"),e(V,"class","average"),e(z,"class","avg_contour"),e(z,"transform","translate(0, 240)"),e(H,"class","expectation"),e(H,"transform","translate(-35, 280)"),e(I,"class","expectation"),e(I,"transform","translate(-35, 295)"),e(X,"cx","13.5"),e(X,"r","3"),e(B,"class","expectation birth"),e(B,"transform","translate(0, 320)"),e(Y,"cx","13.5"),e(Y,"r","3"),e(P,"class","expectation recent"),e(P,"transform","translate(0, 340)"),e(E,"transform","translate(-10, 50)"),e(f,"class","side_legend"),e(f,"transform","translate(680, 50)"),e(i,"width","800"),e(i,"height","800"),e(i,"viewBox","0 0 800 800"),e(i,"xmlns:xlink","http://www.w3.org/1999/xlink"),e(i,"class","svelte-1ty53ph")},m(nt,ct){se(nt,g,ct),a(g,i),a(i,c),a(c,p),a(p,u),a(i,w),k[2](w),a(i,h),a(h,M),a(M,d),a(i,f),a(f,x),a(x,lt),a(f,y),a(y,O),a(f,b),a(b,D),a(f,t),a(t,l),a(l,W),a(f,$),a($,q),a(q,pt),a(f,E),a(E,R),a(R,F),a(R,K),a(K,dt),a(E,L),a(L,T),a(L,N),a(N,ft),a(E,A),a(A,U),a(A,G),a(G,ut),a(E,C),a(C,Q),a(C,Z),a(Z,ht),a(E,z),a(z,V),a(z,tt),a(tt,gt),a(E,H),a(H,et),a(et,xt),a(E,I),a(I,at),a(at,_t),a(E,B),a(B,X),a(B,rt),a(rt,mt),a(E,P),a(P,Y),a(P,st),a(st,vt)},p:$t,i:$t,o:$t,d(nt){nt&&r(g),k[2](null)}}}function it(k,g,i=12){k.append("text").attr("class","label").attr("transform",`translate(${i},0)`).text(g),k.append("circle").attr("r",3),i>15&&k.append("path").attr("class","label__line").attr("d",`M0,0 h${i-5}`)}function ie(k,g,i){let{data:c}=g;const p=c.centenarians.reduce((d,f)=>d.find(x=>x.age==f.age&&x.gender==f.gender&&x.still_alive==f.still_alive)?d:[...d,f],[]),u=[{gender:"male",age:70,label:"average"},{gender:"female",age:75,label:"average"}];let w,h;ne(()=>{h=le(w),h.append("g").attr("class","contours").selectAll("g").data(c.contours.filter((t,l)=>l%5==0&&l<121)).join("path").attr("class","contour").attr("d",Rt);const d=[Qt(c.contours[0].map(t=>t[0])),Qt(c.contours[0].map(t=>t[1]))];h.append("g").attr("class","person_contours").selectAll("g").data(p).join("g").attr("class",t=>`person_contour ${t.still_alive} ${t.gender} ${t.aliveRank==1?"oldest":""}`).append("path").attr("d",t=>Rt(c.contours[Math.floor(t.age)]));const x=u.map(t=>({grp:t,path:c.contours[Math.floor(t.age)]}));h.selectAll("g.avg_contours").data(x).join("g").attr("class",t=>`avg_contour ${t.grp.gender}`).append("path").attr("d",t=>Rt(t.path));const y=h.append("g").attr("class","people_contours_labels").selectAll("g").data(c.centenarians.filter(t=>!!t.aliveRank).map(t=>{const l=80-8*(t.aliveRankAbs??0);return{c:t,pAge:S(c.contours[t.age],d,l),p0:S(c.contours[0],d,l),pBE:S(c.contours[Math.round(t.birth_exp??0)],d,l),pRE:S(c.contours[Math.round(t.exp_recent??0)],d,l)}})).join("g").attr("class",({c:t})=>`${t.gender} expectation`);it(y.append("g").attr("transform",({pAge:t})=>`translate(${t==null?void 0:t.join()})`),({c:t})=>t.aliveRank?`${t.name}`:"");const O=y.append("g").attr("class","expectation");O.append("path").attr("d",t=>{var l,W;return`M${(l=t.p0)==null?void 0:l.join()} L${(W=t.pAge)==null?void 0:W.join()}`}),it(O.append("g").attr("class","expectation birth label").attr("transform",t=>{var l;return`translate(${(l=t.pBE)==null?void 0:l.join()})`}),({c:t})=>`${(+(t.birth_exp??0)).toFixed(1)}`),it(O.append("g").attr("class","recent label").attr("transform",t=>{var l;return`translate(${(l=t.pRE)==null?void 0:l.join()})`}),({c:t})=>`${(+(t.exp_recent??0)).toFixed(1)}`),h.selectAll("path#people_contours_rank").data([c.centenarians.filter(t=>!!t.aliveRank)]).join("path").attr("id","people_contours_rank").style("marker-end","url(#triangleMarker)").attr("stroke","red").attr("d",t=>Gt(t.map(l=>S(c.contours[130+2],d,62-(l.aliveRankAbs??0)*1.6)))),h.selectAll("defs").data([c.centenarians.filter(t=>!!t.aliveRank)]).join("path").attr("id","local_people_contours_rank2").attr("display","none").attr("d",t=>Gt(t.map(l=>S(c.contours[131+2],d,62-(l.aliveRankAbs??0)*1.6))));const b=c.contours.filter((t,l)=>l%10==0&&l<130).map(t=>S(t,d,86)),D=h.append("g").attr("class","legend").selectAll("g").data(b).join("g").attr("transform",t=>`translate(${t==null?void 0:t.join()})`).style("display",(t,l)=>l?"visible":"none");it(D,(t,l)=>`${l*10}`)});function M(d){oe[d?"unshift":"push"](()=>{w=d,i(0,w)})}return k.$$set=d=>{"data"in d&&i(1,c=d.data)},[w,c,M]}class he extends Zt{constructor(g){super(),te(this,g,ie,ce,ee,{data:1})}}export{he as default};
