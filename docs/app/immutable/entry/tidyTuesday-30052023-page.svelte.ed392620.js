import{S as ae,i as re,s as ne,k as se,J as s,q as h,l as oe,m as n,K as o,h as r,r as g,n as e,p as v,b as le,H as a,C as At,o as ce,w as ie}from"../chunks/index.0cb42cb9.js";import"../chunks/transform.f0a34255.js";import{c as zt,a as J,s as te}from"../chunks/helpers.41dfc2ba.js";import{s as pe}from"../chunks/select.84cbef7e.js";function ee(E,_){let d=0,i=0;if(_===void 0)for(let p of E)p!=null&&(p=+p)>=p&&(++d,i+=p);else{let p=-1;for(let x of E)(x=_(x,++p,E))!=null&&(x=+x)>=x&&(++d,i+=x)}if(d)return i/d}function de(E){let _,d,i,p,x,O,k,f,G,c,m,$,y,S,M=E[0].length+"",Q,V,t,l,u,R,W,Z,ut,C,q,tt,ht,L,F,et,gt,A,at,rt,xt,z,U,nt,_t,T,st,mt,H,ot,vt,B,X,lt,Et,P,Y,ct,kt,w,D,yt,j,K,bt;return{c(){_=se("section"),d=s("svg"),i=s("defs"),p=s("marker"),x=s("path"),O=s("g"),k=s("text"),f=s("textPath"),G=h("alive people in each group"),c=s("g"),m=s("text"),$=h("Oldest living people"),y=s("text"),S=h("These "),Q=h(M),V=h(" people are the living part of the top 100 oldest people lists"),t=s("text"),l=h("* as of 1st June 2023"),u=s("g"),R=s("g"),W=s("path"),Z=s("text"),ut=h("male"),C=s("g"),q=s("path"),tt=s("text"),ht=h("female "),L=s("g"),F=s("path"),et=s("text"),gt=h("alive"),A=s("g"),at=s("path"),rt=s("text"),xt=h("deceased"),z=s("g"),U=s("path"),nt=s("text"),_t=h("world average"),T=s("g"),st=s("text"),mt=h("life expectancy"),H=s("g"),ot=s("text"),vt=h("per country:"),B=s("g"),X=s("circle"),lt=s("text"),Et=h("at birth"),P=s("g"),Y=s("circle"),ct=s("text"),kt=h("recent"),w=s("text"),D=s("a"),yt=h("datasources: wikipedia"),j=s("text"),K=s("a"),bt=h("clio-infra"),this.h()},l(it){_=oe(it,"SECTION",{});var dt=n(_);d=o(dt,"svg",{width:!0,height:!0,viewBox:!0,"xmlns:xlink":!0,class:!0});var pt=n(d);i=o(pt,"defs",{});var Bt=n(i);p=o(Bt,"marker",{id:!0,viewBox:!0,refX:!0,refY:!0,markerUnits:!0,markerWidth:!0,markerHeight:!0,orient:!0});var Pt=n(p);x=o(Pt,"path",{d:!0,style:!0}),n(x).forEach(r),Pt.forEach(r),Bt.forEach(r),O=o(pt,"g",{}),n(O).forEach(r),k=o(pt,"text",{style:!0});var Ot=n(k);f=o(Ot,"textPath",{href:!0,startOffset:!0,"text-anchor":!0});var Tt=n(f);G=g(Tt,"alive people in each group"),Tt.forEach(r),Ot.forEach(r),c=o(pt,"g",{class:!0,transform:!0});var I=n(c);m=o(I,"text",{x:!0,y:!0,style:!0});var Ht=n(m);$=g(Ht,"Oldest living people"),Ht.forEach(r),y=o(I,"text",{x:!0,y:!0,style:!0});var ft=n(y);S=g(ft,"These "),Q=g(ft,M),V=g(ft," people are the living part of the top 100 oldest people lists"),ft.forEach(r),t=o(I,"text",{x:!0,y:!0,style:!0});var It=n(t);l=g(It,"* as of 1st June 2023"),It.forEach(r),u=o(I,"g",{transform:!0});var b=n(u);R=o(b,"g",{class:!0,transform:!0});var $t=n(R);W=o($t,"path",{d:!0,class:!0}),n(W).forEach(r),Z=o($t,"text",{});var Jt=n(Z);ut=g(Jt,"male"),Jt.forEach(r),$t.forEach(r),C=o(b,"g",{class:!0,transform:!0});var wt=n(C);q=o(wt,"path",{d:!0,class:!0}),n(q).forEach(r),tt=o(wt,"text",{});var St=n(tt);ht=g(St,"female "),St.forEach(r),wt.forEach(r),L=o(b,"g",{class:!0,transform:!0});var jt=n(L);F=o(jt,"path",{d:!0,class:!0}),n(F).forEach(r),et=o(jt,"text",{});var Wt=n(et);gt=g(Wt,"alive"),Wt.forEach(r),jt.forEach(r),A=o(b,"g",{class:!0,transform:!0});var Mt=n(A);at=o(Mt,"path",{d:!0}),n(at).forEach(r),rt=o(Mt,"text",{});var qt=n(rt);xt=g(qt,"deceased"),qt.forEach(r),Mt.forEach(r),z=o(b,"g",{class:!0,transform:!0});var Rt=n(z);U=o(Rt,"path",{d:!0,class:!0}),n(U).forEach(r),nt=o(Rt,"text",{});var Ft=n(nt);_t=g(Ft,"world average"),Ft.forEach(r),Rt.forEach(r),T=o(b,"g",{class:!0,transform:!0});var Ut=n(T);st=o(Ut,"text",{});var Xt=n(st);mt=g(Xt,"life expectancy"),Xt.forEach(r),Ut.forEach(r),H=o(b,"g",{class:!0,transform:!0});var Yt=n(H);ot=o(Yt,"text",{});var Dt=n(ot);vt=g(Dt,"per country:"),Dt.forEach(r),Yt.forEach(r),B=o(b,"g",{class:!0,transform:!0});var Ct=n(B);X=o(Ct,"circle",{cx:!0,r:!0}),n(X).forEach(r),lt=o(Ct,"text",{});var Kt=n(lt);Et=g(Kt,"at birth"),Kt.forEach(r),Ct.forEach(r),P=o(b,"g",{class:!0,transform:!0});var Lt=n(P);Y=o(Lt,"circle",{cx:!0,r:!0}),n(Y).forEach(r),ct=o(Lt,"text",{});var Nt=n(ct);kt=g(Nt,"recent"),Nt.forEach(r),Lt.forEach(r),b.forEach(r),w=o(I,"text",{x:!0,y:!0,style:!0});var Gt=n(w);D=o(Gt,"a",{href:!0});var Qt=n(D);yt=g(Qt,"datasources: wikipedia"),Qt.forEach(r),Gt.forEach(r),j=o(I,"text",{x:!0,y:!0,style:!0});var Vt=n(j);K=o(Vt,"a",{href:!0});var Zt=n(K);bt=g(Zt,"clio-infra"),Zt.forEach(r),Vt.forEach(r),I.forEach(r),pt.forEach(r),dt.forEach(r),this.h()},h(){e(x,"d","M 0 0 L 10 5 L 0 10 z"),v(x,"fill","currentColor"),v(x,"fill-opacity","0.5"),e(p,"id","triangleMarker"),e(p,"viewBox","0 0 10 10"),e(p,"refX","1"),e(p,"refY","5"),e(p,"markerUnits","strokeWidth"),e(p,"markerWidth","10"),e(p,"markerHeight","10"),e(p,"orient","auto"),e(f,"href","#local_people_contours_rank2"),e(f,"startOffset","50%"),e(f,"text-anchor","middle"),v(k,"font-size",".8em"),v(k,"opacity","0.5"),e(m,"x","70"),e(m,"y","0"),v(m,"font-size","3em"),v(m,"text-anchor","end"),e(y,"x","70"),e(y,"y","40"),v(y,"font-size",".9em"),v(y,"text-anchor","end"),e(t,"x","70"),e(t,"y","60"),v(t,"font-size",".7em"),v(t,"text-anchor","end"),v(t,"opacity","0.7"),e(W,"d","M0,0 h27"),e(W,"class","person_contour alive"),e(R,"class","male alive"),e(R,"transform","translate(0, 120)"),e(q,"d","M0,0 h27"),e(q,"class","person_contour alive"),e(C,"class","female alive"),e(C,"transform","translate(0, 140)"),e(F,"d","M0,0 h27"),e(F,"class","person_contour alive"),e(L,"class","alive"),e(L,"transform","translate(0, 180)"),e(at,"d","M0,0 h27"),e(A,"class","person_contour deceased"),e(A,"transform","translate(0, 200)"),e(U,"d","M0,0 h27"),e(U,"class","average"),e(z,"class","avg_contour"),e(z,"transform","translate(0, 240)"),e(T,"class","expectation"),e(T,"transform","translate(-35, 280)"),e(H,"class","expectation"),e(H,"transform","translate(-35, 295)"),e(X,"cx","13.5"),e(X,"r","3"),e(B,"class","expectation birth"),e(B,"transform","translate(0, 320)"),e(Y,"cx","13.5"),e(Y,"r","3"),e(P,"class","expectation recent"),e(P,"transform","translate(0, 340)"),e(u,"transform","translate(-10, 0)"),e(D,"href","https://en.wikipedia.org/wiki/List_of_verified_oldest_people"),e(w,"x","70"),e(w,"y","710"),v(w,"font-size",".8em"),v(w,"text-anchor","end"),e(K,"href","https://clio-infra.eu/Indicators/LifeExpectancyatBirthTotal.html"),e(j,"x","70"),e(j,"y","730"),v(j,"font-size",".8em"),v(j,"text-anchor","end"),e(c,"class","side_legend"),e(c,"transform","translate(680, 50)"),e(d,"width","800"),e(d,"height","800"),e(d,"viewBox","0 0 800 800"),e(d,"xmlns:xlink","http://www.w3.org/1999/xlink"),e(d,"class","svelte-1uioa63")},m(it,dt){le(it,_,dt),a(_,d),a(d,i),a(i,p),a(p,x),a(d,O),E[3](O),a(d,k),a(k,f),a(f,G),a(d,c),a(c,m),a(m,$),a(c,y),a(y,S),a(y,Q),a(y,V),a(c,t),a(t,l),a(c,u),a(u,R),a(R,W),a(R,Z),a(Z,ut),a(u,C),a(C,q),a(C,tt),a(tt,ht),a(u,L),a(L,F),a(L,et),a(et,gt),a(u,A),a(A,at),a(A,rt),a(rt,xt),a(u,z),a(z,U),a(z,nt),a(nt,_t),a(u,T),a(T,st),a(st,mt),a(u,H),a(H,ot),a(ot,vt),a(u,B),a(B,X),a(B,lt),a(lt,Et),a(u,P),a(P,Y),a(P,ct),a(ct,kt),a(c,w),a(w,D),a(D,yt),a(c,j),a(j,K),a(K,bt)},p:At,i:At,o:At,d(it){it&&r(_),E[3](null)}}}function N(E,_,d="",i=12,p=!0){E.attr("class",`${d}`),E.append("text").attr("transform",`translate(${i},0)`).text(_),p&&E.append("circle").attr("r",3)}function fe(E,_,d){let{data:i}=_;const p=i.centenarians.filter(c=>c.still_alive==="alive"),x=i.centenarians.reduce((c,m)=>c.find($=>$.age==m.age&&$.gender==m.gender&&$.still_alive==m.still_alive)?c:[...c,m],[]),O=[{gender:"male",age:70,label:"average"},{gender:"female",age:75,label:"average"}];let k,f;ce(()=>{f=pe(k),f.append("g").attr("class","contours").selectAll("g").data(i.contours.filter((t,l)=>l%5==0&&l<121)).join("path").attr("class","contour").attr("d",zt);const c=[ee(i.contours[0].map(t=>t[0])),ee(i.contours[0].map(t=>t[1]))];f.append("g").attr("class","person_contours").selectAll("g").data(x).join("g").attr("class",t=>`person_contour ${t.still_alive} ${t.gender} ${t.aliveRank==1?"oldest":""}`).append("path").attr("d",t=>zt(i.contours[Math.floor(t.age)]));const $=O.map(t=>({grp:t,path:i.contours[Math.floor(t.age)]}));f.selectAll("g.avg_contours").data($).join("g").attr("class",t=>`avg_contour ${t.grp.gender}`).append("path").attr("d",t=>zt(t.path));const S=f.append("g").attr("class","people_contours_labels").selectAll("g").data(i.centenarians.filter(t=>!!t.aliveRank).map(t=>{const l=80-8*(t.aliveRankAbs??0);return{c:t,angle:l,pAge:J(i.contours[t.age],c,l),p0:J(i.contours[0],c,l),pBE:J(i.contours[Math.round(t.birth_exp??0)],c,l),pRE:J(i.contours[Math.round(t.exp_recent??0)],c,l)}})).join("g").attr("class",({c:t})=>`${t.gender} expectation`);N(S.append("g").attr("transform",({pAge:t})=>`translate(${t==null?void 0:t.join()})`),({c:t})=>t.aliveRank?`${t.name}`:"");const M=S.append("g").attr("class","expectation");M.append("path").attr("d",t=>{var l,u;return`M${(l=t.p0)==null?void 0:l.join()} L${(u=t.pAge)==null?void 0:u.join()}`}),N(M.append("g").attr("transform",t=>{var l;return`translate(${(l=t.pBE)==null?void 0:l.join()}) rotate(${-t.angle})`}),({c:t})=>`${(+(t.birth_exp??0)).toFixed(1)}`,"expectation birth label",5),N(M.append("g").attr("transform",t=>{var l;return`translate(${(l=t.pRE)==null?void 0:l.join()}) rotate(${-t.angle})`}),({c:t})=>`${(+(t.exp_recent??0)).toFixed(1)}`,"recent label",5),N(M.append("g").attr("transform",t=>{var l;return`translate(${(l=t.pAge)==null?void 0:l.join()}) rotate(${-t.angle})`}),({c:t})=>`${t.place_of_death_or_residence}`,"recent label country",-60,!1),N(M.append("g").attr("transform",t=>{var l;return`translate(${(l=t.p0)==null?void 0:l.join()}) rotate(${-t.angle})`}),({c:t})=>`${t.birth_date}`,"recent label bday",10,!1),f.selectAll("path#people_contours_rank").data([i.centenarians.filter(t=>!!t.aliveRank)]).join("path").attr("id","people_contours_rank").style("marker-end","url(#triangleMarker)").attr("stroke","red").attr("d",t=>te(t.map(l=>J(i.contours[130+2],c,57-(l.aliveRankAbs??0)*1.6)))),f.selectAll("defs").data([i.centenarians.filter(t=>!!t.aliveRank)]).join("path").attr("id","local_people_contours_rank2").attr("display","none").attr("d",t=>te(t.map(l=>J(i.contours[131+2],c,57-(l.aliveRankAbs??0)*1.6))));const Q=i.contours.filter((t,l)=>l%10==0&&l<130).map(t=>J(t,c,86)),V=f.append("g").attr("class","legend").selectAll("g").data(Q).join("g").attr("transform",t=>`translate(${t==null?void 0:t.join()})`).style("display",(t,l)=>l?"visible":"none");N(V,(t,l)=>`${l*10}`,"label")});function G(c){ie[c?"unshift":"push"](()=>{k=c,d(1,k)})}return E.$$set=c=>{"data"in c&&d(2,i=c.data)},[p,k,i,G]}class _e extends ae{constructor(_){super(),re(this,_,fe,de,ne,{data:2,aliveCentenarians:0})}get aliveCentenarians(){return this.$$.ctx[0]}}export{_e as default};
